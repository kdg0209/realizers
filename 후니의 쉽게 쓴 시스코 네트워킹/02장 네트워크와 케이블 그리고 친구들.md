# 네트워크와 케이블 그리고 친구들

<br>

## 1. LAN(Local Area Network)란?

#### LAN이란?

- `Local Area Network`의 약자로 즉 '어느 한정된 공간에서 네트워크를 구성한다'라는 의미입니다.
- LAN이란 특정 지역(학교, 사무실 등) 내에서 네트워크 장비를 통해 연결된 장치들이 동일한 브로드캐스트 도메인 내에서 통신하는 네트워크입니다. 예를들어 동일한 네트워크에 연결된 장치들이 `192.168.1.x/24`의 IP 대역을 사용하고, 라우터를 거치지 않고 직접 통신할 수 있다면 이는 LAN에 속해 있다고 볼 수 있습니다.
- 참고로 AWS에서 LAN과 비슷한 역할을 하는게 `VPC`라는 개념입니다. LAN에서는 같은 브로드캐스트 도메인 내에 있는 장치들이 서로 연결을 주고 받을 수 있으며, `VPC`에서는 같은 서브넷 내에서 서로 연결을 주고받을 수 있습니다.

#### ARP(Address Resolution Protocol)란?

- ARP는 IP주소를 MAC 주소로 변환하는 프로토콜입니다.
- LAN 내에서 HostA가 HostB로 데이터를 전달해야할 때 HostA는 HostB의 MAC 주소를 알고 있어야 하는데 이때 ARP가 사용됩니다.
- HostA는 HostB의 IP주소만 알고 있을 때 ARP 요청을 통해 MAC주소를 알아낸 뒤 통신을 진행하게 됩니다.

#### WAN(Wide Area Network)란?

- `Wide Area Network`의 약자로 즉 '멀리 떨어진 지역을 서로 연결하는 경우'에 사용합니다.

<br>

## 2. 이더넷은 인터넷의 친구?

- 이더넷은 네트워킹의 한 방식입니다. 이더넷 통신 방식중에 중요항 `CSMA/CD`라는 방식이 있습니다.

#### CSMA/CD(Carrier Sense Multiple Access/Collision Detection) 

- 이 통신 방식을 한 마디로 정의하면 '대충 알아서 눈치로 통신하자'입니다.

🚗 과정 

1. 이더넷 환경에서 통신을 하고 싶은 PC나 서버는 먼저 네트워크 상에서 통신이 일어나고 있는지 확인합니다. (`Carrier Sense`)
2. 이때 만약 캐리어가 감지되면, 즉 누군가가 네트워크 상에서 통신을 하고 있다면 자기가 보낼 데이터가 있어도 못 보내고 기다리게 됩니다.
3. 그러다가 네트워크 통신이 없어지면 눈치를 보다가 자신의 데이터를 네트워크에 실어서 보내게 됩니다.
4. 만약 네트워크 상에 두 PC나 서버가 보낸 데이터를 가지고 눈치를 살피고 있다면?
    1. 두 서버가 네트워크상에서 통신이 일어나지 않고 있다는 것을 알았습니다.
    2. 두 서버가 동시에 네트워크상에 자신의 데이터를 실어 보냅니다.
    3. 이너넷에 2개 이상의 PC나 서버가 동시에 네트워크상에 데이터를 실어 보내는 경우가 발생할 수 있는데 이를 `Multiple Access`라고 합니다. 그리고 2개의 서버들이 데이터를 동시에 보내려다가 부딪히는 경우를 충돌(`Collision`)이라 합니다.
    4. 충돌(`Collision`)이 발생하면 데이터를 전송했던 서버들은 랜덤한 시간 동안 기다린 후 다시 데이터를 전송하게 됩니다.

<img width="1032" alt="스크린샷 2025-02-16 오후 5 03 16" src="https://github.com/user-attachments/assets/472370b0-9f18-4745-86aa-5bd717e3f790" />

<br>

## 3. 토큰링이란?

- 토큰링 방식은 네트워크에서 데이터를 전송하고자할 때 이더넷처럼 눈치를 보면서 데이터를 보내는게 아니라 '그 네트워크에서 오직 한 서버, 즉 토큰을 가진 서버만이 네트워크에 데이터를 실어 보낼 수 있습니다.'
- 데이터를 다 보내고 나면 바로 옆 서버에 토큰을 건네주게 됩니다. 토큰링방식에서는 충돌(`Collision`)이 발생하지 않습니다. 하지만 특정 서버는 지금 바로 보내야할 데이터가 있음에도 불구하고 토큰이 없으면 보낼 수 없기 때문에 기다리게되는 문제점이 있습니다.

<br>

## 4. UTP 케이블이란?

- TP 케이블이란 `Twisted-pair` 즉, 두 가닥의 케이블이 한쌍을 이루면서 꼬여있는 케이블을 의미합니다. TP에는 UTP와 STP가 있습니다.

#### UTP란

- UTP는 `Unshielded` TP를 말합니다. 주로 우리가 사용하는 케이블이 UTP 케이블입니다.

#### STP란

- STP는 `Shielded`로 케이블 주위를 어떤 절연체로 감싸 만든것을 의미합니다. STP가 좀 더 비싸고 성능이 좋다고 합니다.

<br>

## 5. 맥 어드레스(MAC Address)란?

- MAC Address는 `Media Access control`의 준말입니다.
- 컴퓨터는 네트워크상에서 서로를 구분해야하는 일종의 주소가 필요하는데, 이 역할을 담당하는 주소가 MAC 주소입니다.

#### 🧐 IP주소와 MAC 주소

- 서버들끼리 통신을 할 때 IP주소만으로 통신을 하는게 아닌가? 라는 생각을 가질 수 있는데, 사실 이 경우에도 MAC 주소를 필요로합니다.
- 내부적으로 IP주소를 MAC주소로 바꾸는 과정(`ARP`)을 거치게 됩니다.

같은 LAN에 속한 ARP 요청

- 라우터를 거치지 않는 하나의 네트워크 안에서의 통신은 아래 과정을 거칩니다.
    1. HostA는 HostB의 IP를 알고 있습니다.
    2. HostA는 자기가 속한 네트워크에 있는 모든 호스트한테 메시지를 보냅니다.(`브로드캐스트`)
        1. HostB의 MAC주소를 알려달라고 보내게됩니다.
        2. HostB는 자신의 MAC주소를 반환하게 됩니다.
 
<img width="1032" alt="스크린샷 2025-02-16 오후 10 14 44" src="https://github.com/user-attachments/assets/39e248ee-5cf2-42e8-9224-277c75daff0e" />

<br><br>

다른 LAN에 속한 ARP 요청

1. HostA가 우리 네트워크에 HostB가 있으면 MAC주소를 반환해줘라고 브로드캐스트를 보냅니다.
2. 라우터는 HostB에게 데이터를 보내고 싶으면 내가 전달해줄게 하고 라우터의 MAC주소를 반환합니다.
3. 이제 HostA는 HostB에게 데이터를 보낼 때 라우터의 MAC주소로해서 데이터를 보내게 됩니다.
4. 라우터는 HostA의 요청을 받아 HostB의 MAC주소를 찾게되고, HostB에게 최종적으로 데이터를 전달하게 됩니다.

<img width="1032" alt="스크린샷 2025-02-16 오후 10 24 50" src="https://github.com/user-attachments/assets/9c17e7af-43a8-40f1-9f4d-33b59bb831c5" />

<br>

#### MAC 주소란?

- 네트워크에 붙는 각 장비들은 48bit의 주소를 가지게 되는데, 이 주소를 랜카드 또는 네트워크 장비에 이미 고정되어 있는 주소이고 유일한 주소입니다.
- 이 주소를 바로 `MAC address` 또는 `Hardware address`라고 합니다.
- `MAC address`는 8자리 마다 하이픈이나 콜론, 점으로 구분되기도 합니다.
- 이 주소에서 앞쪽 6개의 진수(`00-60-97`)가 벤더, 즉 생산자를 나타내는 코드로 이 코드를 `OUI`라고 합니다.

```text
00-60-97-8F-4F-86
00:60:97:8F:4F:86
0060,978F,4F86
```

<br>

## 6. 유니캐스트, 브로드캐스트, 멀티캐스트

#### 유니캐스트

- 유니캐스트는 특정 목적지의 주소 하나만을 가지고 통신하는 방식입니다.
- 유니캐스트 방식으로 통신을 하면 같은 네트워크상에 있는 모든 PC들은 일단 MAC 주소를 받아서 자신의 MAC 주소와 비교를 하고 자신의 MAC 주소와 일치하지 않다면 프레임을 버리고 만약 MAC 주소가 같다면 프레임을 받아서 CPU가 알아서 처리하게 만듭니다.
- 유니캐스트 방식에서는 MAC 주소가 다르면 해당 PC의 CPU까지는 영향을 주지 않으므로 성능 저하가 발생하지 않습니다.

#### 브로드캐스트

- 브로드캐스트는 LAN(브로드캐스트 도메인 공간)에 붙어있는 모든 네트워크 장비들에게 보내는 통신입니다.
- 브로드캐스트의 주소는 미리 정해져 있는데 바로 `FFFF.FFFF.FFFF`입니다. 이 주소가 오면 랜카드는 비록 자신의 MAC 주소와 일치하지 않더라도 패킷을 CPU에게 보내게 됩니다.
- `ARP`는 브로드캐스트의 방식을 사용하고 있는데, 예를들어 LAN에 있는 모든 장비들에게 XXXIP를 사용하고 있는 장비는 나에게 MAC 주소를 반환해! 라고할 때 브로드캐스트 방식이 쓰입니다.

#### 멀티캐스트

- 멀티캐스트는 네트워크에 연결되어 있는 시스템 중에서 특정 그룹에게만 데이터를 전달하는 방식입니다.
- 멀티캐스트는 스위치나 라우터가 멀티캐스트를 지원해야지만 사용할 수 있는 방식입니다.

<br>

## 7. OSI 7 Layer는 왜 만들어졌나요?

- 계층을 나눈 이유는 통신이 일어나는 과정을 단계별로 나누어 파악하고자 했기 때문입니다. (관심사의 분리)

#### 1계층 - 물리 계층

- 물리 계층에서는 주로 전기적, 기계적 특성을 이용하여 통신 케이블로 데이터를 전송하게 됩니다.
- 물리 계층에서 사용되는 통신 단위는 비트이며, 이것은 0과 1로 표현됩니다.
- 물리 계층에서는 단지 데이터를 전달할 뿐 데이터가 무엇인지, 어떤 에러가 있는지, 어떻게 보내는지 더 효과적인지에 대해서는 신경쓰지 않습니다. 오로지 데이터 전송만 담당합니다.

#### 2계층 - 데이터 링크 계층

- 물리 계층을 통해 송/수신되는 정보의 오류와 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 도와주는 역할을 합니다.
- 통신에서 오류도 발견하고, 재전송도 하는 기능을 가지고 있을 뿐만 아니라 MAC 주소를 가지고 통신할 수 있도록 해줍니다.
- 데이터 링크 계층에서 전송되는 단위를 `프레임`이라고 부릅니다.

#### 3계층 - 네트워크 계층

- 네트워크 계층은 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 것입니다. 이를 `라우팅`이라 합니다.
- 경로를 선택하고, 주소를 정하며, 경로에 따라 패킷을 전달해주는 것이 이 계층의 역할입니다.

#### 4계층 - 트랜스포트 계층

- 트랜스포트 계층의 주요 역할은 플로 컨트롤과 에러 복구 기능입니다. 즉, 에러 복구를 위해 패킷을 재전송하거나 플로를 조절해서 데이터가 정상적으로 전송될 수 있도록 합니다.
- TCP, UDP가 이 계층에 속합니다.

<br>

## 8. 컴퓨터는 프로토콜로 말한다

- 프로토콜이란 규약, 협약과 비슷한 의미인데 컴퓨터끼리는 프로토콜이 서로 같은 것끼리만 통신이 가능합니다.


