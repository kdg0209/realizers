# μ¤λ λ“ μ μ–΄μ™€ μƒλ… μ£ΌκΈ° 2

<br>

## μΈν„°λ½νΈ

#### π§ μ™ μΈν„°λ½νΈλ¥Ό μ‚¬μ©ν•΄μ•Όν• κΉ?

- μ•„λμ™€ κ°™μ€ μ½”λ“κ°€ μμ„ λ• 4μ΄ λ’¤μ— μ‘μ—… μ¤‘λ‹¨μ„ μ§€μ‹ν•μ§€λ§ λ§μ§€λ§‰ μ‘μ—…μ€ μ§„ν–‰μ΄ λ©λ‹λ‹¤. 
μ¦‰, μ‘μ—…μ€ ν•λ²λ§ μ§„ν–‰μ΄ λμ–΄μ•Όν•κ³ , λ§μ§€λ§‰ μ‘μ—…μ€ 1μ΄ ν•λ‹¤κ°€ λ©μ¶°μ•Όν•λ”λ° μμƒλ€λ΅ μ§„ν–‰μ΄ λμ§€ μ•λ” λ¬Έμ κ°€ λ°μƒν•©λ‹λ‹¤.

```java
public class Main {

    public static void main(String[] args) throws InterruptedException {
        Task task = new Task();
        Thread thread = new Thread(task);
        thread.start();

        Thread.sleep(4000);
        System.out.println("μ‘μ—… μ¤‘λ‹¨ μ§€μ‹");
        task.stop();
    }

    static class Task implements Runnable {

        volatile boolean runFlag = true;

        public void stop() {
            this.runFlag = false;
        }

        @Override
        public void run() {
            while (this.runFlag) {
                try {
                    System.out.println("μ‘μ—… μ§„ν–‰ μ¤‘");
                    Thread.sleep(3000);
                } catch (InterruptedException e) {
                    System.out.println("μΈν„°λ½νΈ λ°μƒ");
                }
            }
            System.out.println("μμ› μ •λ¦¬");
            System.out.println("μ‘μ—… μΆ…λ£");
        }
    }
}

// μ‘μ—… μ§„ν–‰ μ¤‘
// μ‘μ—… μ§„ν–‰ μ¤‘
// μ‘μ—… μ¤‘λ‹¨ μ§€μ‹
// μμ› μ •λ¦¬
// μ‘μ—… μΆ…λ£
```

<br>

#### μΈν„°λ½νΈλ¥Ό μ‚¬μ©ν•΄μ„ ν•΄κ²°ν•΄λ³΄μ.

- interrupt() λ©”μ„λ“λ¥Ό ν™μ©ν•μ—¬ νΉμ • μ¤λ λ“μ—κ² μΈν„°λ½νΈλ¥Ό νΈμ¶ν•κ³ , ν•΄λ‹Ή μ¤λ λ“λ” TIMED_WAITING μƒνƒμ—μ„ RUNNABLE μƒνƒλ΅ λ³€κ²½μ΄ λμ—λ‹¤κ°€ TERMINATED μƒνƒκ°€ λ©λ‹λ‹¤.

```java
public class Main {

    public static void main(String[] args) throws InterruptedException {
        Task task = new Task();
        Thread thread = new Thread(task);
        thread.start();

        Thread.sleep(10);
        System.out.println("μ‘μ—… μ¤‘λ‹¨ μ§€μ‹");
        // thread WAITING μƒνƒλ¨
        thread.interrupt();  // μΈν„°λ½νΈ λ°μƒ
        // thread TERMINATED μƒνƒλ¨
    }

    static class Task implements Runnable {

        @Override
        public void run() {
            while (!Thread.interrupted()) {
                System.out.println("μ‘μ—… μ§„ν–‰ μ¤‘");
            }
            // μΈν„°λ½νΈλ΅ μΈν•΄ RUNNABLE μƒνƒλ΅λμ–΄ μ‘μ—… λ§λ¬΄λ¦¬ ν•¨
            System.out.println("μμ› μ •λ¦¬");
            System.out.println("μ‘μ—… μΆ…λ£");
        }
    }
}
```

<br>

## yield - μ–‘λ³΄ν•κΈ°

- μ–΄λ–¤ μ¤λ λ“λ¥Ό μ–Όλ§λ‚ μ‹¤ν–‰ν• μ§€λ” μ΄μμ²΄μ κ°€ μ¤μΌ€μ¤„λ§μ„ ν†µν•΄ κ²°μ •ν•κ² λ©λ‹λ‹¤. κ·Έλ°λ° νΉμ • μ¤λ λ“κ°€ λ°”μμ§€ μ•μ€ μƒν™©μ΄μ—¬μ„ λ‹¤λ¥Έ μ¤λ λ“μ—κ² CPU μμ›μ„ μ–‘λ³΄ν•κ³  μ‹¶μ„ μ μλ”λ°, μ–‘λ³΄λ¥Ό ν•κ² λλ‹¤λ©΄ μ¤μΌ€μ¤„λ§ νμ—μ„ λ€κΈ°ν•κ³  μλ λ‹¤λ¥Έ μ¤λ λ“κ°€ CPU μμ›μ„ νλ“ν•κ² λ©λ‹λ‹¤.

#### π— λ™μ‘ μ›λ¦¬

- Thread.yield() λ©”μ„λ“λ” ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ μ¤λ λ“κ°€ μλ°μ μΌλ΅ CPUλ¥Ό μ–‘λ³΄ν•μ—¬ λ‹¤λ¥Έ μ¤λ λ“κ°€ μ‹¤ν–‰λ  μ μλ„λ΅ ν•©λ‹λ‹¤.
- Thread.yield() λ©”μ„λ“λ¥Ό νΈμ¶ν• μ¤λ λ“λ” RUNNABLE μƒνƒλ¥Ό μ μ§€ν•λ©΄μ„ CPUλ¥Ό μ–‘λ³΄ν•κ³ , μ΄ μ¤λ λ“λ” μ¤μΌ€μ¤„λ§ νμ— λ“¤μ–΄κ°€κ² λ©λ‹λ‹¤. 

#### π’΅ sleepκ³Ό yieldμ μ°¨μ΄

- sleep λ©”μ„λ“λ¥Ό νΈμ¶ν• μ¤λ λ“λ” WAITINGλ‚ TIMED WAITING μƒνƒκ°€ λμ§€λ§ yield λ©”μ„λ“λ¥Ό νΈμ¶ν• μ¤λ λ“λ” RUNNABLE μƒνƒκ°€ λ©λ‹λ‹¤.

#### π’΅ μ°Έκ³ 

- yield λ©”μ„λ“λ” μ΄μμ²΄μ μ μ¤μΌ€μ¤„λ¬μ—κ² λ‹¨μ§€ μ–‘λ³΄ν•λ‹¤λ” ννΈλ§ μ¤„ λΏμ΄μ§€ κ°•μ μ μΈ μ‹¤ν–‰ μμ„λ¥Ό μ§€μ •ν•μ§€ μ•μµλ‹λ‹¤. λν• λ‹¤λ¥Έ μ¤λ λ“κ°€ μ—†λ‹¤λ©΄ μ–‘λ³΄ν•μ§€ μ•κ³  μμ‹ μ΄ κ³„μ† μ‘μ—…ν•κ² λ©λ‹λ‹¤.



