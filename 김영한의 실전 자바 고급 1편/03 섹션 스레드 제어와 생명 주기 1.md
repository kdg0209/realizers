# ìŠ¤ë ˆë“œ ì œì–´ì™€ ìƒëª… ì£¼ê¸° 1

<br>

## ìŠ¤ë ˆë“œì˜ ìƒëª…ì£¼ê¸°

#### NEW

- ìŠ¤ë ˆë“œê°€ ìƒì„±ë˜ì—ˆìœ¼ë‚˜, ì•„ì§ ì‹¤í–‰ë˜ì§€ ì•Šì€ ìƒíƒœì…ë‹ˆë‹¤. ì¦‰, í™ ì˜ì—­ì— ê°ì²´ë§Œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

#### RUNNABLE

- ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ë  ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆê±°ë‚˜, ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœì…ë‹ˆë‹¤.
- ìë°”ì—ì„œëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ì˜ CPU ìì›ì„ í• ë‹¹ ë°›ê¸°ì „ ìƒíƒœì´ë“ , CPU ìì›ì„ í• ë‹¹ ë°›ì•„ ì‘ì—…ì„ ì§„í–‰ ì¤‘ ìƒíƒœì´ë“  êµ¬ë¶„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‘˜ë‹¤ RUNNABLE ìƒíƒœì…ë‹ˆë‹¤.

#### BLOCKED

- ìŠ¤ë ˆë“œê°€ ë™ê¸°í™” ë½ì„ ê¸°ë‹¤ë¦¬ëŠ” ìƒíƒœì…ë‹ˆë‹¤.
- synchronized ë¸”ë¡ì— ì§„ì…í•˜ê¸° ì „ì— ë½ì„ íšë“í•˜ê¸° ìœ„í•´ ê¸°ë‹¤ë¦¬ëŠ” ìƒíƒœì…ë‹ˆë‹¤.

#### TIMED WAITING

- ìŠ¤ë ˆë“œê°€ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì˜ ì‘ì—…ì„ íŠ¹ì • ì‹œê°„ë§Œí¼ ëŒ€ê¸°í•˜ëŠ” ìƒíƒœì…ë‹ˆë‹¤.
- sleep(long ms), wait(long timeout), join(long ms) ë©”ì„œë“œ í˜¸ì¶œ ì‹œ TERMINATED ìƒíƒœê°€ ë©ë‹ˆë‹¤.

#### WAITING

- ìŠ¤ë ˆë“œê°€ ë¬´ê¸°í•œìœ¼ë¡œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì˜ ì‘ì—…ì„ ê¸°ë‹¤ë¦¬ëŠ” ìƒíƒœì…ë‹ˆë‹¤.
- wait(), join() ë©”ì„œë“œ í˜¸ì¶œ ì‹œ WAITING ìƒíƒœê°€ ë©ë‹ˆë‹¤.
- ìŠ¤ë ˆë“œëŠ” ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ notify(), notifyAll() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ê¹¨ì–´ë‚˜ê±°ë‚˜ join()ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

#### TERMINATED

- ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ ì™„ë£Œëœ ìƒíƒœì…ë‹ˆë‹¤.
- ìŠ¤ë ˆë“œëŠ” ì¢…ë£Œë˜ë©´ ë‹¤ì‹œ ì‹œì‘ë  ìˆ˜ ì—†ê³ , ë‹¤ì‹œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.

#### ì˜ˆì œ ì½”ë“œ

```java
public class Main {

    public static void main(String[] args) throws Exception {

        Runnable runnable = () -> {
            try {
                System.out.println("1. " + Thread.currentThread().getName() + "ì˜ ìƒíƒœ: " + Thread.currentThread().getState()); // RUNNABLE
                Thread.sleep(3000);
                System.out.println("3. " + Thread.currentThread().getName() + "ì˜ ìƒíƒœ: " + Thread.currentThread().getState()); // RUNNABLE
            } catch (InterruptedException e) {}
        };
        
        Thread thread = new Thread(runnable);
        thread.start();
        Thread.sleep(1000);
        System.out.println("2. " + thread.getName() + "ì˜ ìƒíƒœ: " + thread.getState()); // TIMED_WAITING
        Thread.sleep(4000);

        System.out.println("4. " + thread.getName() + "ì˜ ìƒíƒœ: " + thread.getState()); // TERMINATED
    }
}
```

<br>

## ì²´í¬ ì˜ˆì™¸ ì¬ì •ì˜

#### ğŸ§ Runnable ì¸í„°í˜ì´ìŠ¤ì˜ run() ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•  ë•Œ InterruptedException ì˜ˆì™¸ë¥¼ ë°–ìœ¼ë¡œ ë˜ì§ˆ ìˆ˜ ì—†ëŠ”ë° ì™œ ê·¸ëŸ´ê¹Œ?

- ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ìì‹ í´ë˜ìŠ¤ëŠ” ë¶€ëª¨ ë©”ì„œë“œê°€ ë˜ì§€ëŠ” ì˜ˆì™¸ì˜ í•˜ìœ„ ì˜ˆì™¸ë§Œ ë˜ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ì²˜ë¦¬í•˜ëŠ” ì´ìœ ëŠ” ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. ë§Œì•½ ë¶€ëª¨ í´ë˜ìŠ¤ëŠ” ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•ŠëŠ”ë°, ìì‹ í´ë˜ìŠ¤ì—ì„œ ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤ë©´ <b> ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™ </b>ì„ ìœ„ë°°í•˜ê²Œ ë©ë‹ˆë‹¤.
- ë˜í•œ ì˜ˆì™¸ ë°œìƒ ì‹œ ì˜ˆì™¸ê°€ ì ì ˆí•˜ê²Œ ì²˜ë¦¬ë˜ì§€ ì•Šì•„ì„œ í”„ë¡œê·¸ë¨ì´ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³ , ë©€í‹° ìŠ¤ë ˆë”© í™˜ê²½ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ê°•ì œí•¨ìœ¼ë¡œì¨ ì•ˆì •ì„±ê³¼ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

## Join ë©”ì„œë“œì— ëŒ€í•´

### join ë©”ì„œë“œê°€ ì™œ í•„ìš”í• ê¹Œ?

#### ìƒí™©

- ì•„ë˜ 1 ~ 10,000,000 ê¹Œì§€ ë”í•˜ëŠ” ì—°ì‚°ì„ ìŠ¤ë ˆë“œ í•˜ë‚˜ë¡œë„ ì¶©ë¶„í•˜ì§€ë§Œ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ ìŠ¤ë ˆë“œì—ê²Œ ì‘ì—…ì„ ë‚˜ëˆ ì„œ í• ë‹¹í•œ ë‹¤ìŒì— ë§ˆì§€ë§‰ì— ì´ í•©ì„ ê³„ì‚°í•˜ë©´ ë” ë¹ ë¥¼ ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒí™©ì—ì„œ join ë©”ì„œë“œë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
public class Main {

    public static void main(String[] args) {

        long sum = 0;
        for (int i = 1; i <= 10_000_000; i++) {
            sum += i;
        }

        System.out.println(sum); // 50000005000000
    }
}
```

<br>

#### ìŠ¤ë ˆë“œë¡œ ì‘ì—…ì„ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•˜ê¸°

- Main í´ë˜ìŠ¤ì—ì„œ join() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ê°ê°ì˜ ìŠ¤ë ˆë“œë“¤ì´ ì‘ì—…ì„ ì™„ë£Œí•  ë•Œê¹Œì§€ main ìŠ¤ë ˆë“œëŠ” ê¸°ë‹¤ë¦¬ê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

```java
public class SumTask implements Runnable {

    private final int start;
    private final int end;
    private long result;

    public SumTask(int start, int end) {
        this.start = start;
        this.end = end;
    }

    public long getResult() {
        return result;
    }

    @Override
    public void run() {

        try {
            for (int i = start; i <= end; i++) {
                result += i;
            }
            Thread.sleep(2000);
        } catch (InterruptedException e) { }
    }
}

public class Main {

    public static void main(String[] args) throws InterruptedException {

        SumTask sumTaskA = new SumTask(1, 5_000_000);
        SumTask sumTaskB = new SumTask(5_000_001, 10_000_000);

        Thread threadA = new Thread(sumTaskA);
        Thread threadB = new Thread(sumTaskB);

        threadA.start();
        threadB.start();

        threadA.join();
        threadB.join();

        long result = sumTaskA.getResult() + sumTaskB.getResult();
        System.out.println("result: " + result); // 50000005000000
    }
}
```


