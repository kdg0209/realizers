# 센티널

- 레디스의 자체 고가용성 기능인 센티널은 아래와 같은 장애 상황을 대비할 수 있습니다.
- 센티널의 자동 페일오버 기능을 사용하여 마스터 노드에 장애발생시 레디스를 계속 사용할 수 있도록 해주는 프로그램입니다.

## 센티널의 기능

- 모니터링
  - 마스터, 복제본 노드 인스턴스의 상태를 실시간으로 확인합니다.
- 자동 페일오버
  - 마스터 노드에 장애 발생시 복제본 노드 중 하나를 마스터로 승격시킵니다.
  - 기존 마스터 노드에 연결된 복제본 노드는 새로운 마스터 노드에 연결됩니다.
- 인스턴스 구성 정보 안내
  - 센티널은 클라이언트에게 현재 구성에서의 마스터 정보를 알려줍니다.
  - 페일오버가 발생하면 변경된 마스터 정보를 재전달하기 때문에 페일오버가 발생한다 하더라도 엔드포인트를 변경할 필요가 없습니다.

![스크린샷 2024-03-31 오후 12 30 40](https://github.com/kdg0209/realizers/assets/80187200/c342751c-af3c-43ab-a1dd-66450241c682)

<br>

## 분산 시스템으로 동작하는 센티널

- SPOF(Single Point Of Failure)는 하나의 서비스에 문제가 발생했을 때 전체 시스템에 영향을 미치는 것을 의미합니다.
- 센티널은 SPOF가 되는 것을 방지하기 위해 최소 3대 이상일 떄 정상적으로 동작할 수 있도록 설계되었으며, 하나의 센티널에 이상이 생기더라도 다른 센티널이 계속해서 역할을 수행할 수 있습니다.
- 센티널은 오탐을 줄이기 위해 쿼럼이라는 개념을 사용하는데, 마스터가 비정상적으로 동작하는 것에 동의하는 센티널 수로, 쿼럼(과반수)를 만족하는 경우에 페일오버를 시작합니다.

## 센티널 인스턴스 배치 방법

- 센티널 인스턴스는 물리적으로 서로 영향받지 않는 서버에서 실행되는 것이 좋습니다.

#### 쿼럼이 2인 경우

![스크린샷 2024-03-31 오후 12 43 48](https://github.com/kdg0209/realizers/assets/80187200/dc8be5c7-c6df-4a48-a89b-0c99e82636ad)

<br>





