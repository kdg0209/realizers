# 메모리와 캐시 메모리

## RAM의 특징과 종류
<hr>

### RAM의 특징

- RAM에는 실행중인 프로그램의 명령어와 데이터가 저장됩니다.
- CPU는 보조저장장치에 직접 접근할 수 없습니다. 그래서 일반적으로 보조저장장치인 비휘발성 저장 장치에는 보관할 대상을 저장하고,
    휘발성 저장장치인 RAM에는 실행할 대상을 저장합니다.

### RAM의 종류

#### DRAM

- 저장된 데이터가 동적으로 변하는(사라지는) RAM을 의미합니다.
- DRAM은 시간이 지나면 저장된 데이터가 점차 사라지는 RAM입니다. 그렇기 때문에 DRAM은 데이터의 소멸을 막기위해 일정 주기로 데이터를 재활성화(다시 저장) 해야합니다.
- 우리가 일반적으로 메모리로써 사용되는 RAM은 DRAM입니다.

#### SRAM

- 저장된 데이터가 변하지 않는 RAM을 의미합니다.
- DRAM과 달리 SSAM은 시간이 지나도 데이터가 소멸되지 않습니다.
- SRAM은 DRAM보다 일반적으로 속도도 빠릅니다.
- SRAM은 메모리가 아닌 대용량으로 만들어질 필요는 없지만 속도가 빨라야하는 저장장치인 캐시 메모리에서 사용됩니다.

<br>

## 메모리의 주소 공간
<hr>

### 물리 주소와 논리 주소

#### 물리 주소란?

- 메모리가 사용하는 물리 주소는 정보가 실제로 저장된 하드웨어상의 주소를 의미합니다.

#### 논리 주소란?

- CPU와 현재 실행 중인 프로그램이 사용하는 주소입니다. 

<br>

## 메모리 보호 기법
<hr>

- 논리 주소와 물리 주소간의 변환은 CPU와 주소 버스 사이에 위치한 MMU라는 하드웨어에 의해 수행됩니다.
- 베이스 레지스터 주소 지정 방식을 사용하여 동작하게 되는데 여기서 베이스 레지스터는 프로그램의 가장 작은 물리 주소를 저장하고, 논리 주소는 프로그램의 시작점으로부터 떨어진 거리입니다.
- CPU는 메모리에 접근하기 전에 접근하고자 하는 논리 주소가 한계 레지스터보다 작은지 항상 검사합니다. 만약 CPU가 한계 레지스터보다 높은 논리 주소에 접근하려고 한다면 인터럽트(트랩)를 발생시킵니다.
- 

![스크린샷 2023-11-29 오후 10 55 15](https://github.com/kdg0209/realizers/assets/80187200/155791c9-efe7-4aae-b04a-9df90bc4b233)

<br>

## 캐시 메모리
<hr>

### 저장 장치 계층 구조

- CPU와 가까운 저장 장치는 빠르고, 멀리 있는 저장 장치는 느리다.
- 속도가 빠른 저장 장치는 저장 용량이 작고, 비싸다.
- 컴퓨터가 사용하는 저장 장치들은 CPU에서 얼마나 가까운가를 기준으로 계층적으로 나타낼 수 있습니다. 이를 저장 장치 계층 구조라 합니다.

### 캐시 메모리

- 캐시 메모리는 CPU와 메모리 사이에 위치하고, 레지스터보다 용량이 크고 메모리보다 접근 속도가 빠른 SRAM 기반의 저장 장치입니다.
- 캐시 메모리는 CPU의 연산 속도와 메모리 접근 속도의 차이를 조금이나마 줄이기 위해 탄생하였습니다. 
- CPU가 매번 메모리를 왔다갔다 하는게 시간이 오래 걸리니, 메모리에서 CPU가 사용할 일부 테이터를 미리 캐시 메모리로 가져와서 사용하는 것입니다.
- 코어와 가장 가까운 캐시 메모리를 L1 캐시, 그다음 가까운 캐시 메모리를 L2 캐시, 그다음 가까운 캐시 메모리를 L3 캐시라고 부릅니다.
- 일반적으로 L1 캐시와 L2 캐시는 CPU 내부에, L3 캐시는 CPU 외부에 있습니다.

  
![스크린샷 2023-12-17 오후 4 19 04](https://github.com/kdg0209/realizers/assets/80187200/b285fd59-39dd-43f3-81b1-7f72836df69e)

- 멀티 코어 프로세서에서 L1, L2, L3 캐시는 일반적으로 아래 사진과 같이 구현됩니다. L1, L2 캐시는 코어마다 고유한 캐시 메모리로 할당되고, L3 캐시는 여러 코어가 공유하는 형태로 사용됩니다.

![스크린샷 2023-12-17 오후 4 19 21](https://github.com/kdg0209/realizers/assets/80187200/d2e22fce-7f5e-4bb4-b876-e628b0f7c549)

<br>

## 참조 지역성 원리
<hr>

- 캐시 메모리는 CPU가 사용할 법한 대상을 예측하여 저장합니다. 이때 자주 사용될 것으로 예측한 데이터가 실제로 들어맞아 캐시 메모리 내 데이터가 CPU에서 사용되는 경우를 캐시 히트라 합니다.
- 자주 사용될 것으로 예측하여 캐시 메모리에 저장했지만 예측이 틀려 캐시 메모리 데이터가 아니라 메모리의 데이터를 직접 가져와 사용하는 경우를 캐시 미스라 합니다.
- 캐시 메모리는 참조 지역성의 원리에 의해 메모리로부터 가져올 데이터를 결정하게 됩니다.

#### 원리

1. CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다.
    - 최근에 접근했던 메모리 공간에 다시 접근하려는 경향을 시간 지역성이라 합니다.
2. CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다.
    - CPU가 실행하려는 프로그램은 보통 관련 데이터들끼리 한곳에 모여 있습니다. 
    - 접근한 메모리 공간 근처를 접근하려는 경향을 공간 지역성이라 합니다.

<br>
<br>

### 🤔 생각해볼 수 있는 질문들

1. DRAM과 SRAM에 대해 설명하시오.
    - DRAM은 저장된 데이터가 동적으로 변하는 RAM입니다. 저장된 데이터가 소멸하기 때문에 주기적으로 재활성화 해야합니다.
    - SRAM은 저장된 데이터가 변하지 않는 RAM입니다. SRAM은 DRAM보다 빠르고, 주로 캐시 메모리에 사용됩니다.

2. 물리 주소와 논리 주소가 무엇인가요?
   - 물리 주소란 메모리의 하드웨어 주소입니다.
   - 논리 주소란 CPU와 실행 중인 프로그램이 사용하는 주소입니다.

3. 논리 주소가 물리 주소로 변환되기 위해서 어떤 장치를 사용하는가?
   - CPU와 주소 버스 사이에 위치한 MMU라는 하드웨어 장치를 통해 변환됩니다.

4. 메모리 주소 보호는 어떤 방식으로 이루어 지는가?
    - 메모리의 기준 레지스터와 상한 레지스터를 사용하여 보호가 됩니다.

5. 캐시 메모리를 사용하는 이유가 무엇인가?
    - CPU의 연산속도가 메모리에 접근하는 속도보다 훨씬 빠르기 때문에 이 차이를 줄이고자 캐시 메모리를 사용합니다.

6. 참조 지역성의 원리는 어떤 방식으로 구현되었는가?
    - 시간 지역성과 공간 지역성입니다.
    - 시간 지역성이란 CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있습니다.
    - 공간 지역성이란 CPU가 실행하려는 프로그램은 보통 관련 데이터들끼리 모여 있습니다. 그리고 CPU는 접근한 메모리 공간 근처를 다시 접근하려는 경향이 있습니다.

리
















 
