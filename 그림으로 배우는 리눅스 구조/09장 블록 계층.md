# 블록 계층

<br>

## 1. 하드 디스크의 특징

#### 💡 하드 디스크란?

- 하드 디스크는 데이터를 자기 정보로 표현해서 플래터라고 부르는 자기 디스크에 기록하는 저장장치입니다.
- 데이터는 바이트 단위가 아니라, 보통 512바이트 또는 4KB 단위의 ‘섹터(Sector)’ 단위로 읽고 씁니다.
- 하드 디스크는 `자기 헤드` 라는 부품으로 섹터에 저장된 데이터를 읽고 씁니다. 플래터를 회전시켜서 읽고 쓸 대상 섹터로 자기 헤드를 이동시킵니다.

<img width="1032" alt="스크린샷 2025-05-10 오후 2 16 19" src="https://github.com/user-attachments/assets/c0c2f27b-3b9d-4923-91b3-ddfa593461e4" />

<br><br>

#### 🚗 과정

- 아래 과정에서 1번과 3번의 과정은 전기 신호 처리여서 빠르지만 2번 과정은 기계적인 처리여서 훨씬 느립니다.

1. 디바이스 드라이버가 데이터를 읽고 쓰는데 필요한 정보를 하드 디스크에 전달합니다. (섹터 번호, 섹터 개수, 접근 종류)
2. 스윙 암과 플래터를 움직여서 원하는 섹터 위에 자기 헤드 위치를 맞춥니다.
3. 데이터를 읽거나 씁니다.

<br>

## 2. 하드 디스크와 참조 지역성의 원리

- `미리 읽기` 기능을 통해 블록 장치의 어떤 영역을 읽을 때 `참조 지역성`을 활용하여 미리 데이터를 읽어 `페이지 캐시`에 보관하는 기능입니다.

### 2-1. 참조 지역성의 원리란?

- 참조 지역성의 원리는 `공간적 지역성`과 `시간적 지역성`으로 구분할 수 있습니다.

#### 공간적 지역성

- CPU는 메모리에 접근할 때 가까운 미래에 그 근처에 있는 데이터에 접근할 가능성이 있습니다.

#### 시간적 지역성

- CPU는 메모리에 접근할 때 가까운 미래에 또 다시 접근할 가능성이 있습니다.

<br>

### 2-2. 입출력 스케줄러

- 입출력 스케줄러는 블록 장치의 접근 요청을 일정 시간 보류했다가 다음과 같은 최적화 처리를 하여 디바이스 드라이버에 입출력 요청을 호출합니다.
- 정렬 이후 합치기 처리를 하면 상황에 따라 입출력 성능을 향상시킬 수 있습니다. 그 이유는 섹터 번호를 정렬하고 합치면 플래터를 회전시키는 비용을 줄일 수 있기 때문입니다.

#### 합치기

- 연속된 섹터의 입출력 요청을 하나로 합칩니다.

#### 정렬

- 연속하지 않은 섹터의 입출력 요청을 섹터 번호 순서대로 재정렬합니다.


