# URL 단축기 설계

<br>

## 1단계. 문제 이해 및 설계 범위 확정

- 쓰기 연산: 매일 1억개의 단축 URL 생성
- 초당 쓰기 연산: 1억개 / 24 / 3600 = 1,160
- 읽기 연산: 읽기 연산과 쓰기 연산의 비율은 10:1이라고 가정합니다. (1160 x 10 = 11,600)
- URL 단축 서비스를 10년 동안 운영한다고 가정하면 1억 x 365 x 10 = 3650억개의 레코드를 보관해야 합니다.
- 축약 전 URL의 평균 길이는 100 바이트입니다.
- 10년동안 필요한 저장 용량은 3650 x 100바이트 = 36.5TB 입니다.

<br>

## 2단계. 계략적 설계안 제시 및 동의 구하기

### API 엔드포인트

- URL 단축기는 기본적으로 두 개의 엔드포인트가 필요합니다.

#### 1. URL 단축용 엔드포인트

- 단축 URL을 생성하고자 하는 클라이언트는 엔드포인트를 통해 단축 URL을 발급받을 수 있습니다.

#### 2. URL 리다이렉션용

- 단축 URL에 대해서 HTTP 요청이 들어오면 원래 URL로 리다이렉션 시켜줘야 합니다.

<br>

### URL 리다이렉션

- 301 permanently moved
  - 해당 URL에 대한 HTTP 요청의 처리 책임이 영구적으로 Location 헤더에 반환된 URL로 이전되었다는 응답입니다.
  - 영구적으로 이전되었으므로, 브라우저는 이 응답을 캐시하여 똑같은 단축 URL 요청이 온다면 단축 URL 서버로 가지 않고 캐시된 원래 URL로 요청을 보냅니다.
  - 단축 URL 서버의 부하를 줄이는 것이 중요할 때 사용됩니다.
 
- 302 Found
  - 주어진 URL로의 요청이 '일시적으로' Location 헤더가 지정하는 URL에 의해 처리되어야 한다는 응답입니다.
  - 클라이언트의 요청은 언제나 단축 URL 서버에 먼저 보내지고, 원래 URL로 리다이렉션됩니다.
  - 트래픽 분석이나, 클릭 발생률, 발생 위치를 추적하는데 조금 더 유리하다고 합니다.

![스크린샷 2024-06-24 오후 10 02 09](https://github.com/kdg0209/realizers/assets/80187200/1e89c4a2-5331-479c-bfc2-41816cdda94c)

<br><br>

### URL 단축

- 긴 URL은 해시 함수를 거쳐 단축 URL로 만들 수 있어야 합니다.
- 해시된 URL은 원래 URL로 복원할 수 있어야 합니다.

![스크린샷 2024-06-24 오후 10 28 10](https://github.com/kdg0209/realizers/assets/80187200/2960b79e-8290-40ff-a90a-ee4dccbf44a2)

<br><br>

## 3단계. 상세 설계

















