# ìƒì„± ë””ìì¸ íŒ¨í„´

- ìƒì„± ë””ìì¸ íŒ¨í„´ì€ ê°ì²´ ìƒì„± ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ , ë³µì¡í•œ ìƒì„± í”„ë¡œì„¸ìŠ¤ë¥¼ ìº¡ìŠí™”í•˜ë©° ê°ì²´ ìƒì„±ì½”ë“œë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

## ì‹±ê¸€í„´ íŒ¨í„´

- ê°ì²´ë¥¼ í•˜ë‚˜ë§Œ ìƒì„±í•˜ì—¬ ìì›ì„ íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤.
- êµ¬í˜„ ì¡°ê±´
  1. ìƒì„±ìëŠ” new ì˜ˆì•½ì–´ë¥¼ í†µí•œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ í”¼í•˜ê¸° ìœ„í•´ private ì ‘ê·¼ ì œí•œìë¥¼ ê°€ì ¸ì•¼í•©ë‹ˆë‹¤.
  2. ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì‹œ Thread Safeí•´ì•¼ í•©ë‹ˆë‹¤.
  3. í´ë¼ì´ì–¸íŠ¸ê°€ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” í•„ë“œê°€ ìˆìœ¼ë©´ ì•ˆë©ë‹ˆë‹¤.
  4. ì§€ì—° ë¡œë”©ì´ ê°€ëŠ¥í•´ì•¼í•©ë‹ˆë‹¤.
 
### ì´ë¥¸ ì´ˆê¸°í™”

- ê°€ì¥ ì‰½ê²Œ? êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ì‹±ê¸€í„´ íŒ¨í„´ì…ë‹ˆë‹¤.
- static í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ í´ë˜ìŠ¤ ë¡œë”ì— ì˜í•´ í´ë˜ìŠ¤ê°€ ë¡œë”©ë  ë•Œ ë©”ëª¨ë¦¬ìƒì— í•˜ë‚˜ì˜ ê°ì²´ë§Œ ìƒì„±ë©ë‹ˆë‹¤. ë˜í•œ í´ë˜ìŠ¤ê°€ ìµœì´ˆ ë¡œë”©ë  ë•Œ ê°ì²´ê°€ ìƒì„±ë˜ë¯€ë¡œ Thread-Safeí•©ë‹ˆë‹¤.
- ë‹¤ë§Œ í´ë˜ìŠ¤ ë¡œë”ì— ì˜í•´ í´ë˜ìŠ¤ê°€ ë¡œë”©ë˜ëŠ” ì‹œì ì— ë°”ë¡œ ìƒì„±ë˜ë¯€ë¡œ ì§€ì—° ë¡œë”©ì´ ë¶ˆê°€ëŠ¥í•˜ê³ , í•´ë‹¹ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šë”ë¼ë„ ë©”ëª¨ë¦¬ìƒì— ì ìœ í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ìì›ì´ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
public class User {

    private static final User instance = new User();

    private User() { }

    public User getInstance() {
        return instance;
    }
}
```

<br>

### ëŠ¦ì€ ì´ˆê¸°í™”

- ëŠ¦ì€ ì´ˆê¸°í™” ë°©ì‹ì€ ìë°”ì—ì„œ ì œê³µí•˜ëŠ” ëª¨ë‹ˆí„° ë½ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì¸ë°, í´ë˜ìŠ¤ ë¡œë”ì— ì˜í•´ í´ë˜ìŠ¤ê°€ ë¡œë”©ë˜ëŠ” ì‹œì ì— ê°ì²´ê°€ ìƒì„±ë˜ëŠ”ê²Œ ì•„ë‹ˆë¼ getInstance ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹œì ì—ì„œ ê°ì²´ê°€ ìƒì„±ë©ë‹ˆë‹¤.
- í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ê³ ì í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ë§ì„ìˆ˜ë¡ synchronized í‚¤ì›Œë“œì— ì˜í•´ ì„±ëŠ¥ ì €í•˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
public class User {

    private static User instance;

    private User() { }

    public static synchronized User getInstance() {
        if (instance == null) {
            instance = new User();
        }
        return instance;
    }
}
```

<br>

### ì´ì¤‘ ì ê¸ˆ(Double Checked Locking)

- ëª¨ë‹ˆí„° ë½ì„ ë©”ì„œë“œ ë ˆë²¨ì— ì„ ì–¸í•˜ê²Œ ë˜ë©´ ë©”ì„œë“œ í˜¸ì¶œì‹œë§ˆë‹¤ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ê³ ì Double Checked Locking ê¸°ë²•ì´ ë‚˜ì˜¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- í•´ë‹¹ ë°©ì‹ì—ì„œëŠ” ë¸”ëŸ­ ë°©ì‹ì˜ ëª¨ë‹ˆí„° ë½ì„ ì‚¬ìš©í•˜ì—¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.
- Double Checked Locking ê¸°ë²•ì„ ì‚¬ìš©í•˜ë©´ ê°€ì‹œì„± ë¬¸ì œë¡œ ì¸í•´ ì¸ìŠ¤í„´ìŠ¤ê°€ 2ê°œ ìƒì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›ë¦¬ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
  - ìŠ¤ë ˆë“œ Aê°€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ëª¨ë‹ˆí„° ë½ì„ í•´ì œí•©ë‹ˆë‹¤.
  - ìŠ¤ë ˆë“œ Bê°€ ëª¨ë‹ˆí„° ë½ì— ì§„ì…í•˜ëŠ” ì‹œì ì— ìŠ¤ë ˆë“œ Aê°€ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ê°€ main memoryì— ìˆëŠ”ê²Œ ì•„ë‹Œ ìºì‹œ ë©”ëª¨ë¦¬ì—ë§Œ ìˆëŠ” ê²½ìš° ë˜ëŠ” ë°˜ëŒ€ì˜ ìƒí™©ì—ì„œ ìŠ¤ë ˆë“œ BëŠ” í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  íŒë‹¨í•˜ì—¬ ì¶”ê°€ì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê²Œ ë©ë‹ˆë‹¤.

```java
public class User {

    private static User instance;

    private User() { }

    public static User getInstance() {
        if (instance == null) {
            synchronized (User.class) { // í´ë˜ìŠ¤ ë ˆë²¨ì˜ ì ê¸ˆ ì²˜ë¦¬ instance ë³€ìˆ˜ë¡œ í•˜ê²Œë˜ë©´ NPE ë°œìƒí•¨
                if (instance == null) {
                    instance = new User();
                }
            }
        }

        return instance;
    }
}
```

<br>

### í™€ë”ì— ì˜í•œ ì´ˆê¸°í™”(Initialzation on demand holder)

- static inner classì˜ íŠ¹ì„±ì„ ì‚¬ìš©í•˜ì—¬ static classì´ì§€ë§Œ ë°”ë¡œ ë©”ëª¨ë¦¬(static ì˜ì—­)ì— í• ë‹¹ë˜ì§€ ì•Šê³  í´ë¼ì´ì–¸íŠ¸ê°€ getInstance ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼ ë©”ëª¨ë¦¬ì— í• ë‹¹ë˜ê²Œ ë©ë‹ˆë‹¤.
- JVMì˜ Class Loaderì˜ ë§¤ì»¤ë‹ˆì¦˜ê³¼ classì˜ load ì‹œì ì„ ì´ìš©í•˜ì—¬ inner classë¥¼ ìƒì„±ì‹œí‚´ìœ¼ë¡œ ìŠ¤ë ˆë“œê°„ ë™ê¸°í™” ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤.
- Javaì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‹±ê¸€í†¤ì€ ì´ ë°©ë²•ì„ ê°€ì¥ ë§ì´ ì‚¬ìš©í•œë‹¤ê³  í•©ë‹ˆë‹¤.

```java
public class User {

    private User() { }

    public static User getInstance() {
        return Holder.instance;
    }
    
    private static class Holder {
        
        private static final User instance = new User();
    }
}
```

<br>

### ì‹±ê¸€í„´ íŒŒê´´ìˆ (Reflection) ë° Serializable

- javaì—ì„œ Enumì„ ì œì™¸í•˜ê³ ëŠ” Reflectionì´ë¼ëŠ” ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ì‹±ê¸€í„´ì„ ê¹¨íŠ¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì§ë ¬í™” ë° ì—­ì§ˆë ¬í™” ê³¼ì •ì—ì„œë„ ì‹±ê¸€í„´ íŒ¨í„´ì€ ê¹¨ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
@Test
void ì‹¤ê¸€í„´_íŒŒê´´ìˆ () throws InvocationTargetException, InstantiationException, IllegalAccessException {

    User instance = User.getInstance();

    Constructor<?>[] constructors = User.class.getDeclaredConstructors();
    for (Constructor<?> constructor : constructors) {
        constructor.setAccessible(true);
        User user = (User)constructor.newInstance();

        System.out.println("ë¦¬í”Œë™ì…˜ì„ ì‚¬ìš©í•œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±: " + user.hashCode());
        System.out.println("ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤: " + instance.hashCode());
    }
}
```

<br>

### ì‹±ê¸€í„´ íŒ¨í„´ì˜ ë‹¨ì 

#### 1. ì‹±ê¸€í„´ íŒ¨í„´ì€ í´ë˜ìŠ¤ ê°„ì˜ ì˜ì¡´ì„±ì„ ê°ì¶¥ë‹ˆë‹¤.

- ì˜ì¢€ì„±ì„ ê°ì¶”ê¸°ë„ í•˜ì§€ë§Œ í´ë˜ìŠ¤ ê°„ì˜ ê°•ê²°í•©ì´ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. ì‹±ê¸€í„´ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œ í›„ ì‹±ê¸€í„´ í´ë˜ìŠ¤ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” í´ë˜ìŠ¤ì— ì‰½ê²Œ ì£¼ì…í•  ìˆ˜ ìˆì§€ë§Œ ì‹±ê¸‘í„´ì— ë³€ê²½ì„ í•˜ëŠ” ìˆœê°„ ì°¸ì¡°í•˜ëŠ” ëª¨ë“  ê°ì²´ì— ì˜í–‰ì„ ë¯¸ì¹˜ê²Œ ë©ë‹ˆë‹¤.

#### 2. ì½”ë“œ í™•ì¥ì„±ì— ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤.

#### 3. í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.

- ì‹±ê¸€í„´ í´ë˜ìŠ¤ê°€ ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ì— ì˜ì¡´í•˜ê³  ìˆë‹¤ë©´ Mockìœ¼ë¡œ ëŒ€ì²´í•˜ì—¬ í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.

#### 4. ë©¤ë²„ ë³€ìˆ˜ë¥¼ ë˜ëŠ” ì „ì—­ ë³€ìˆ˜ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì‹±ê¸€í„´ì€ ë°”ëŒì§í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

- ì‹±ê¸€í„´ íŒ¨í„´ì€ ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” ìƒì„±ìë¥¼ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë©”ì„œë“œë¥¼ í†µí•´ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì•„ ì„¤ì •í•˜ê±°ë‚˜ ë‹¤ë¥¸ íšŒí”¼ë°©ë²•ì„ ì‚¬ìš©í•  ìˆœ ìˆì§€ë§Œ ì‹±ê¸€í„´ íŒ¨í„´ì€ ë¬´ìƒíƒœì—¬ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ë°©ë²•ì€ ì¢‹ì§€ ì•ŠìŠµë‹ˆë‹¤.

<br>

## íŒ©í† ë¦¬ íŒ¨í„´

### ë‹¨ìˆœ íŒ©í† ë¦¬ íŒ¨í„´

- ë‹¨ìˆœ íŒ©í† ë¦¬ íŒ¨í„´ì€ íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ íŒ©í† ë¦¬ ë§¤ì„œë“œ íŒ¨í„´ì€ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¡œì§ì„ ì„œë¸Œ í´ë˜ìŠ¤ì— ìœ„ì„í•˜ì§€ë§Œ ë‹¨ìˆœ íŒ©í† ë¦¬ íŒ¨í„´ì€ ê°ì²´ ìƒì„±ì„ ì¤‘ì•™ ì§‘ì¤‘í™”í•©ë‹ˆë‹¤.
- ì•„ë˜ í´ë˜ìŠ¤ë¥¼ ë³´ë©´ Text, Number, Date, Periodì˜ Attribute íƒ€ì…ì— ë”°ë¼ ê°ì²´ê°€ ë‹¤ë¥´ê²Œ ìƒì„±ë©ë‹ˆë‹¤. ì´ë•Œ Select, CheckBox, File íƒ€ì…ì´ ì¶”ê°€ëœë‹¤ë©´ Factory í´ë˜ìŠ¤ì—ì„œ ë‚´ë¶€ ë¶„ê¸°ë¬¸ì´ ì¶”ê°€ë©ë‹ˆë‹¤.

```java
public abstract class Attribute {

    private final String id;
    private final String style;

    public Attribute(String id, String style) {
        this.id = id;
        this.style = style;
    }
}

public class TextAttribute extends Attribute {

    private final Object value;

    public TextAttribute(String id, String style, Object value) {
        super(id, style);
        this.value = value;
    }
}

public class NumberAttribute extends Attribute {

    private final Object value;

    public NumberAttribute(String id, String style, Object value) {
        super(id, style);
        this.value = value;
    }
}

public class DateAttribute extends Attribute {

    private final Object value;

    public DateAttribute(String id, String style, Object value) {
        super(id, style);
        this.value = value;
    }
}

public class PeriodAttribute extends Attribute {

    private final Object startDate;
    private final Object endDate;

    public PeriodAttribute(String id, String style, Object startDate, Object endDate) {
        super(id, style);
        this.startDate = startDate;
        this.endDate = endDate;
    }
}

public class AttributeFactory {

    public static Attribute createAttribute(String id, String style, Object obj) {

        if (style.equals("text")) {
            return new TextAttribute(id, style, obj);
        }

        if (style.equals("number")) {
            return new NumberAttribute(id, style, obj);
        }

        if (style.equals("date")) {
            return new DateAttribute(id, style, obj);
        }

        if (style.equals("period")) {
            return new PeriodAttribute(id, style, obj, obj);
        }

        throw new IllegalArgumentException("styleì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
    }
}
```

#### ğŸ‘ ì¥ì 

- ê°ì²´ ìƒì„± ë¡œì§ì¸ ê°„ë‹¨í•œ ê²½ìš° ê°ì²´ ìƒì„±ì„ ì¤‘ì•™ ì§‘ì¤‘í™”í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ğŸ˜‚ ë‹¨ì 

- ê°ì²´ ìƒì„±ì´ ë³µì¡í•˜ê±°ë‚˜ ìƒì„±í•´ì•¼í•  ë¶„ê¸°ë¬¸ì´ ë§ì´ì§„ë‹¤ë©´ ì˜¤íˆë´ ê°€ë…ì„±ì´ ë‚®ì•„ì§€ê³ , í´ë˜ìŠ¤ê°€ ê±°ëŒ€í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê°œë°© íì‡„ ì›ì¹™ì— ìœ„ë°°ë©ë‹ˆë‹¤. ê¸°ì¡´ ë©”ì„œë“œì— ë¶„ê¸°ë¬¸ì„ ì¶”ê°€í•  ë•Œë§ˆë‹¤ ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ê¹¨ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

<br>

### íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´

- ì–´ë–¤ í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ë§Œë“¤ì§€ëŠ” ì„œë¸Œ í´ë˜ìŠ¤ì— ìœ„ì„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

```java
public abstract class Attribute {

    private final String id;
    private final String style;

    public Attribute(String id, String style) {
        this.id = id;
        this.style = style;
    }
}

public class DateAttribute extends Attribute {

    private final Object value;

    public DateAttribute(String id, String style, Object value) {
        super(id, style);
        this.value = value;
    }
}

public class NumberAttribute extends Attribute {

    private final Object value;

    public NumberAttribute(String id, String style, Object value) {
        super(id, style);
        this.value = value;
    }
}

public class PeriodAttribute extends Attribute {

    private final Object startDate;
    private final Object endDate;

    public PeriodAttribute(String id, String style, Object startDate, Object endDate) {
        super(id, style);
        this.startDate = startDate;
        this.endDate = endDate;
    }
}

public class TextAttribute extends Attribute {

    private final Object value;

    public TextAttribute(String id, String style, Object value) {
        super(id, style);
        this.value = value;
    }
}

public interface AttributeFactory {

    Attribute create(String id, String style, Object obj);
}

public class DateFactory implements AttributeFactory{

    @Override
    public Attribute create(String id, String style, Object obj) {
        return new DateAttribute(id, style, obj);
    }
}

public class NumberFactory implements AttributeFactory {

    @Override
    public Attribute create(String id, String style, Object obj) {
        return new NumberAttribute(id, style, obj);
    }
}

public class PeriodFactory implements AttributeFactory {

    @Override
    public Attribute create(String id, String style, Object obj) {
        return new PeriodAttribute(id, style, obj, obj);
    }
}

public class TextFactory implements AttributeFactory {

    @Override
    public Attribute create(String id, String style, Object obj) {
        return new TextAttribute(id, style, obj);
    }
}

```

#### ğŸ‘ ì¥ì 

- ìƒˆë¡œìš´ Attributeê°€ ìƒê¸°ëŠ” ê²½ìš° ì½”ë“œì˜ í™•ì¥ì´ ê°„ë‹¨í•©ë‹ˆë‹¤.

#### ğŸ˜‚ ë‹¨ì 

- ì½”ë“œëŸ‰ì´ ë§ì•„ì§‘ë‹ˆë‹¤. ë‹¨ìˆœ íŒ©í† ë¦¬ ê¸°ëŠ¥ê³¼ ë¹„êµí•´ë³¸ë‹¤ë©´ ì½”ë“œê°€ 2ë°° ì¦ê°€í•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë³µì¡ì„±ì´ ì¦ê°€í•©ë‹ˆë‹¤.

<br>

## ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´

```java
public interface Source {

    String append();
}

public class DefaultSource implements Source {

    @Override
    public String append() {
        return "í† ë§ˆí†  ì†ŒìŠ¤";
    }
}

public class BBQSource implements Source {

    @Override
    public String append() {
        return "ë°”ë² í ì†ŒìŠ¤";
    }
}

public interface Topping {

    String append();
}

public class DefaultTopping implements Topping {

    @Override
    public String append() {
        return "ë°€ê°€ë£¨";
    }
}

public class CheeseTopping implements Topping {

    @Override
    public String append() {
        return "ì¹˜ì¦ˆ";
    }
}

public abstract class PizzaFactory {

    public abstract Source createSource();
    public abstract Topping createTopping();
}

public class DefaultPizzaFactory extends PizzaFactory {

    @Override
    public Source createSource() {
        return new DefaultSource();
    }

    @Override
    public Topping createTopping() {
        return new DefaultTopping();
    }
}

public class PremiumPizzaFactory extends PizzaFactory {

    @Override
    public Source createSource() {
        return new BBQSource();
    }

    @Override
    public Topping createTopping() {
        return new CheeseTopping();
    }
}

public class PizzaGenerator {

    private final PizzaFactory pizzaFactory;

    public PizzaGenerator(PizzaFactory pizzaFactory) {
        this.pizzaFactory = pizzaFactory;
    }

    public void startCooking() {
        Source source = pizzaFactory.createSource();
        Topping topping = pizzaFactory.createTopping();

        System.out.println(source.append() + "ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
        System.out.println(topping.append() + "ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    public void completedCooking() {
        System.out.println("í”¼ìê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
}

class PizzaGeneratorTest {

    @Test
    void testA() {

        // given
        PizzaFactory factory = new DefaultPizzaFactory();

        // when
        PizzaGenerator pizzaGenerator = new PizzaGenerator(factory);

        pizzaGenerator.startCooking();
        pizzaGenerator.completedCooking();
    }

    @Test
    void testB() {

        // given
        PizzaFactory factory = new PremiumPizzaFactory();

        // when
        PizzaGenerator pizzaGenerator = new PizzaGenerator(factory);

        pizzaGenerator.startCooking();
        pizzaGenerator.completedCooking();
    }

}
```

#### ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´ì— ëŒ€í•œ ê°œì¸ì ì¸ ìƒê°

- ì½”ë“œëŸ‰ì´ ë§ì•„ì§‘ë‹ˆë‹¤. ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´ì€ ë³µì¡ì„±ì´ ë„ˆë¬´ ì¦ê°€í•˜ê³ , ì´ë¥¼ ì˜ ì‚¬ìš©í•´ë³¸ì ì´ ì—†ì–´ì„œ ì–¸ì œ ì‚¬ìš©í•˜ëŠ”ê²Œ ì ì ˆí• ê¹Œ? ì˜ë¬¸ì´ ìƒê¹ë‹ˆë‹¤.

<br>

## ìŠ¤í”„ë§ì—ì„œì˜ íŒ©í† ë¦¬ íŒ¨í„´

### DI ì»¨í…Œì´ë„ˆì™€ íŒ©í† ë¦¬ íŒ¨í„´ì˜ ì°¨ì´

- DI ì»¨í…Œì´ë„ˆ í•˜ë‹¨ ê³„ì¸µì˜ ê¸°ë³¸ ì„¤ê³„ ì‚¬ìƒì€ íŒ©í† ë¦¬ íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.
- íŒ©í† ë¦¬ íŒ¨í„´ì€ íŠ¹ì • í´ë˜ìŠ¤ì˜ ê°ì²´ ë˜ëŠ” ë™ì¼í•œ ì¶”ìƒ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” í•˜ìœ„ í´ë˜ìŠ¤ë“¤ì˜ ê°ì²´ ìƒì„±ë§Œ ë‹´ë‹¹í•˜ì§€ë§Œ DI ì»¨í…Œì´ë„ˆëŠ” ì „ì²´ ì‘ìš© í”„ë¡œê·¸ë¨ì—ì„œ ëª¨ë“  í´ë˜ìŠ¤ë“¤ì˜ ìƒì„±ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
- DI ì»¨í…Œì´ë„ˆëŠ” ê°ì²´ ìƒì„±ë¿ë§Œ ì•„ë‹ˆë¼ ì„¤ì • ë¶„ì„, ìƒëª… ì£¼ê¸°ë“±ë„ ê´€ë¦¬í•©ë‹ˆë‹¤.

#### ì„¤ì • ë¶„ì„

- ymlíŒŒì¼ì´ë‚˜ propertiesíŒŒì¼ì„ ì½ì–´ ì„¤ì • ì •ë³´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
# ì„¤ì • íŒŒì¼
spring.redis.host=localhost
spring.redis.port=6379

@Configuration
public class RedisConfiguration {

    @Value("${spring.redis.host}")
    private String redisHost;

    @Value("${spring.redis.port}")
    private int redisPort;

    @Bean
    public RedisConnectionFactory redisConnectionFactory() {
        return new LettuceConnectionFactory(redisHost, redisPort);
    }

    @Bean
    public RedisTemplate<String, String> redisTemplate() {
        RedisTemplate<String, String> redisTemplate = new RedisTemplate<>();
        redisTemplate.setConnectionFactory(redisConnectionFactory());
        redisTemplate.setKeySerializer(new StringRedisSerializer());
        redisTemplate.setValueSerializer(new StringRedisSerializer());
        return redisTemplate;
    }
}
```

#### ê°ì²´ ìƒì„± ë° ìƒëª… ì£¼ê¸° ê´€ë¦¬

- DI ì»¨í…Œì´ë„ˆëŠ” ê°œë°œìê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ë¦¬í”Œë™ì…˜ ê¸°ë²•ì„ í†µí•´ ê°ì²´ë¥¼ ìƒì„±í•´ì£¼ê±°ë‚˜, ì—¬ëŸ¬ ì„¤ì •ì„ í†µí•´ í”„ë¡ì‹œë¡œ ê°ì²´ë¥¼ ìƒì„±í•  ê²ƒì¸ì§€, lazy loadingì„ í†µí•´ ìƒì„±í•  ê²ƒì¸ì§€ ë“±ì„ ê´€ë¦¬í•´ì¤ë‹ˆë‹¤.

<br>

## ë¹Œë” íŒ¨í„´

- ë¹Œë” íŒ¨í„´ì€ ìƒì„±ê¸° íŒ¨í„´ì´ë¼ê³ ë„ ë¶ˆë¦½ë‹ˆë‹¤.

### ë¹Œë” íŒ¨í„´ì„ ì‚¬ìš©í•˜ì§€ ì•Šì€ ìƒì„±ì

- ì•„ë˜ ResourcePoolConfig í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ ìƒì„±í•  ë•Œ intí˜•ì˜ ìë£Œ êµ¬ì¡°ë¡œ ì¸ìë¥¼ ë„˜ê¸°ê²Œ ë˜ëŠ”ë°, ë§¤ê°œë³€ìˆ˜ì˜ ìˆœì„œë¥¼ ì˜ ëª» ì„¸íŒ…í•˜ëŠ” ê²½ìš° ì˜ë„ì¹˜ ì•Šì€ ë™ì‘ìœ¼ë¡œ í˜ëŸ¬ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë§¤ê°œë³€ìˆ˜ê°€ ë§ì•„ì§„ë‹¤ë©´ ê°€ë…ì„±ì´ë‚˜ ì‚¬ìš© í¸ì˜ì„±ì´ ì•ˆì¢‹ì•„ì§‘ë‹ˆë‹¤.

```java
public class ResourcePoolConfig {

    private String name;
    private int maxTotal;
    private int maxIdle;
    private int minIdle;

    public ResourcePoolConfig(String name, int maxTotal, int maxIdle, int minIdle) {
        setName(name);
        setMaxTotal(maxTotal);
        setMaxIdle(maxIdle);
        setMinIdle(minIdle);
    }

    private void setName(String name) {
        if (name == null || name.isBlank()) {
            throw new IllegalArgumentException();
        }
        this.name = name;
    }

    private void setMaxTotal(int maxTotal) {
        if (maxTotal < 0) {
            throw new IllegalArgumentException();
        }
        this.maxTotal = maxTotal;
    }

    private void setMaxIdle(int maxIdle) {
        if (maxIdle < 0) {
            throw new IllegalArgumentException();
        }
        this.maxIdle = maxIdle;
    }

    private void setMinIdle(int minIdle) {
        if (minIdle < 0) {
            throw new IllegalArgumentException();
        }
        this.minIdle = minIdle;
    }
}

class Main {

    public static void main(String[] args) {
        ResourcePoolConfig config = new ResourcePoolConfig("name", 50, 50, 10);
    }
}
```

<br>

### Setterë¥¼ ì‚¬ìš©í•œ ë©¤ë²„ ë³€ìˆ˜ ì„¤ì •

- setter ë©”ì„œë“œë¥¼ í†µí•´ì„œ ê°’ì„ í• ë‹¹í•  ìˆ˜ ìˆëŠ”ë° ê°œì¸ì ìœ¼ë¡œ ì´ëŠ” ì •ë§ ì¢‹ì§€ ì•Šì€ ì½”ë“œë¼ ìƒê°í•©ë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
- Thread-Safeí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- ë¬´ë¶„ë³„í•œ setter ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë‚®ì€ ê²°í•©ë„ë¥¼ ì•¼ê¸°ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
public class ResourcePoolConfig {

    private String name;
    private int maxTotal;
    private int maxIdle;
    private int minIdle;

    public ResourcePoolConfig() {
       
    }

    public void setName(String name) {
        if (name == null || name.isBlank()) {
            throw new IllegalArgumentException();
        }
        this.name = name;
    }

    public void setMaxTotal(int maxTotal) {
        if (maxTotal < 0) {
            throw new IllegalArgumentException();
        }
        this.maxTotal = maxTotal;
    }

    public void setMaxIdle(int maxIdle) {
        if (maxIdle < 0) {
            throw new IllegalArgumentException();
        }
        this.maxIdle = maxIdle;
    }

    public void setMinIdle(int minIdle) {
        if (minIdle < 0) {
            throw new IllegalArgumentException();
        }
        this.minIdle = minIdle;
    }
}

class Main {

    public static void main(String[] args) {
        ResourcePoolConfig config = new ResourcePoolConfig();
        config.setName("name");
        config.setMaxTotal(50);
        config.setMaxIdle(45);
        config.setMinIdle(10);
    }
}
```

<br>

### ë¹Œë” íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ë©¤ë²„ë³€ìˆ˜ ì„¤ì •

- ResourcePoolConfig í´ë˜ìŠ¤ì˜ ìƒì„±ì ì ‘ê·¼ ì œí•œìëŠ” private ì´ê¸° ë•Œë¬¸ì— ResourcePoolConfig í´ë˜ìŠ¤ëŠ” ë¹Œë”ë§Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ResourcePoolConfig í´ë˜ìŠ¤ëŠ” setter ë©”ì„œë“œë¥¼ ì œê³µí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë¶ˆë³€ ê°ì²´ì…ë‹ˆë‹¤.

```java
public class ResourcePoolConfig {

    private String name;
    private int maxTotal;
    private int maxIdle;
    private int minIdle;

    private ResourcePoolConfig(Builder builder) {
        this.name = builder.name;
        this.maxTotal = builder.maxTotal;
        this.maxIdle = builder.maxIdle;
        this.minIdle = builder.minIdle;
    }

    public static class Builder {

        private String name;
        private int maxTotal;
        private int maxIdle;
        private int minIdle;

        public Builder setName(String name) {
            if (name == null || name.isBlank()) {
                throw new IllegalArgumentException();
            }
            this.name = name;
            return this;
        }

        public Builder setMaxTotal(int maxTotal) {
            if (maxTotal < 0) {
                throw new IllegalArgumentException();
            }
            this.maxTotal = maxTotal;
            return this;
        }

        public Builder setMaxIdle(int maxIdle) {
            if (maxIdle < 0) {
                throw new IllegalArgumentException();
            }
            this.maxIdle = maxIdle;
            return this;
        }

        public Builder setMinIdle(int minIdle) {
            if (minIdle < 0) {
                throw new IllegalArgumentException();
            }
            this.minIdle = minIdle;
            return this;
        }

        public ResourcePoolConfig build() {
            return new ResourcePoolConfig(this);
        }
    }
}

class Main {

    public static void main(String[] args) {
        ResourcePoolConfig config = new ResourcePoolConfig.Builder()
                    .setName("name")
                    .setMaxTotal(50)
                    .setMaxIdle(45)
                    .setMinIdle(10)
                    .build();
    }
}
```

<br>

### ë¹Œë” íŒ¨í„´ê³¼ íŒ©í† ë¦¬ íŒ¨í„´ì˜ ì°¨ì´

#### íŒ©í† ë¦¬ íŒ¨í„´

- íŒ©í† ë¦¬ íŒ¨í„´ì€ ë™ì¼í•œ ìƒìœ„ í´ë˜ìŠ¤ë‚˜ í•˜ìœ„ í´ë˜ìŠ¤ ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ ê·¸ë£¹ê³¼ ê°™ì€ ìœ í˜•ì€ ë‹¤ë¥´ì§€ë§Œ ì—°ê´€ë˜ì–´ ìˆëŠ” ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©ë˜ë©°, ì–´ë–¤ ìœ í˜•ì˜ ê°ì²´ë¥¼ ìƒì„±í• ì§€ëŠ” ë§¤ê°œë³€ìˆ˜ì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤.

#### ë¹Œë” íŒ¨í„´

- ë¹Œë” íŒ¨í„´ì€ ê°ì²´ ìƒì„±ì‹œ ë§¤ê°œë³€ìˆ˜ê°€ ë§ê±°ë‚˜, ë¶ˆë³€ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ, ë©”ì„œë“œ ì²´ì´ë‹ì„ ì§€ì›í•˜ì—¬ ì—°ê´€ëœ ë¡œì§ì„ êµ¬ì„±í•´ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

<br>

## í”„ë¡œí† íƒ€ì… íŒ¨í„´

- í”„ë¡œí† íƒ€ì… íŒ¨í„´ì€ ê°ì²´ ìƒì„±ì‹œ ë¹„ìš©ì´ ë§ì´ ë“¤ê³ , ë¹„ìŠ·í•œ ê°ì²´ê°€ ì´ë¯¸ ìˆëŠ” ê²½ìš° í•´ë‹¹ ê°ì²´ë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

### ì–•ì€ ë³µì‚¬ì™€ ê¹Šì€ ë³µì‚¬

- í”„ë¡œí† íƒ€ì… íŒ¨í„´ì„ ì•Œê¸°ìœ„í•´ ìš°ì„  ì–•ì€ ë³µì‚¬ì™€ ê¹Šì€ ë³µì‚¬ì— ëŒ€í•´ ì•Œ í•„ìš”ì„±ì´ ìˆìŠµë‹ˆë‹¤.

#### ì–•ì€ ë³µì‚¬

- ì›ë³¸ ê°ì²´ì™€ ë³µì‚¬ëœ ê°ì²´ëŠ” ê°™ì€ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì–´ëŠ í•˜ë‚˜ì˜ ê°ì²´ ê°’ì´ ë³€ê²½ë˜ë©´ ì›ë³µ ê°ì²´, ë³µì‚¬ëœ ê°ì²´ì— ì˜í–¥ì„ ë¯¸ì¹˜ê²Œ ë©ë‹ˆë‹¤.

#### ê¹Šì€ ë³µì‚¬

- ì›ë³¸ ê°ì²´ë¥¼ ë³µì‚¬í•˜ì—¬ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë§Œë“¤ë©°, ì›ë³¸ ê°ì²´ì™€ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ í• ë‹¹ë°›ê²Œ ë©ë‹ˆë‹¤.
- ì›ë³¸ ê°ì²´ì™€ ë³µì‚¬ëœ ê°ì²´ëŠ” ì„œë¡œ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ìƒì˜ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì–´ëŠ í•˜ë‚˜ ê°’ì´ ë³€ê²½ë˜ë”ë¼ë„ ë‹¤ë¥¸ ê°ì²´ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- Javaì—ì„œëŠ” Cloneableì´ë¼ëŠ” ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ê¹Šì€ ë³µì‚¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì˜ˆì œ

```java
public class ApplePhone implements Cloneable {

    private String name;
    private Integer version;

    public ApplePhone(String name, Integer version) {
        this.name = name;
        this.version = version;
    }

    public void updateName(String name) {
        this.name = name;
    }

    @Override
    public ApplePhone clone() throws CloneNotSupportedException {
        return (ApplePhone) super.clone();
    }

    @Override
    public String toString() {
        return "ApplePhone{" +
                "name='" + name + '\'' +
                ", version=" + version +
                '}';
    }
}

public class Main {

    public static void main(String[] args) throws CloneNotSupportedException{
        ApplePhone iPhone = new ApplePhone("ì•„ì´í° ë¯¸ë‹ˆ", 12);

        // ê¹Šì€ ë³µì‚¬
        ApplePhone deepCopyIPhone = iPhone.clone();

        // ì–•ì€ ë³µì‚¬
        ApplePhone copyIPhone = iPhone;

        iPhone.updateName("ì•„ì´í° 15");
        deepCopyIPhone.updateName("ì•„ì´í° 14");
        copyIPhone.updateName("ì•„ì´í° 13");

        System.out.println(iPhone);          // ApplePhone{name='ì•„ì´í° 13', version=12}
        System.out.println(deepCopyIPhone);  // ApplePhone{name='ì•„ì´í° 14', version=12}
        System.out.println(copyIPhone);      // ApplePhone{name='ì•„ì´í° 13', version=12}

    }
}
```




