#  êµ¬ì¡° ë””ìì¸ íŒ¨í„´

## í”„ë¡ì‹œ íŒ¨í„´

- í”„ë¡ì‹œ íŒ¨í„´ì€ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ê³¼ ìƒì† ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆì œëŠ” ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•  ê²ƒì…ë‹ˆë‹¤.
- í”„ë¡ì‹œ íŒ¨í„´ì—ëŠ” ê¸°ë³¸í˜•, ê°€ìƒ, ë³´í˜¸, ë¡œê¹…, ì›ê²©, ìºì‹± í”„ë¡ì‹œê°€ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ê¸°ë³¸í˜•, ê°€ìƒ, ë¡œê¹…, ìºì‹±ì— ëŒ€í•´ì„œë§Œ ì‚´í„ë³¼ ì˜ˆì •ì…ë‹ˆë‹¤.

### í”„ë¡ì‹œ íŒ¨í„´ì˜ êµ¬ì¡°

- í”„ë¡ì‹œ íŒ¨í„´ì˜ êµ¬ì¡°ë¥¼ ì‚´í´ë³´ë©´ Proxy í´ë˜ìŠ¤ì™€ RealSubject í´ë˜ìŠ¤ëŠ” Subject í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  ìˆìœ¼ë©°, Proxy í´ë˜ìŠ¤ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ Subject í´ë˜ìŠ¤ì—ê²Œ ì–´ë– í•œ í–‰ë™ì„ ìœ„ì„ì‹œí‚µë‹ˆë‹¤.

<img width="1032" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-04-25 á„‹á…©á„’á…® 10 02 38" src="https://github.com/kdg0209/realizers/assets/80187200/2611c589-55df-4ce7-a9d0-83968104ec06">

<br>

### ê¸°ë³¸ í”„ë¡ì‹œ

- ê¸°ë³¸ í”„ë¡ì‹œëŠ” í–‰ìœ„ëŠ” RealSubjectì—ê²Œ ìœ„ì„ì„ í•˜ê³  í”„ë¡ì‹œì—ì„œëŠ” ì¶”ê°€ì ì¸ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
- í”„ë¡ì‹œ íŒ¨í„´ì—ì„œ í”„ë¡ì‹œ í´ë˜ìŠ¤ëŠ” ì›ë³¸ í´ë˜ìŠ¤ì™€ ê´€ë ¨ ì—†ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê°œì¸ì ìœ¼ë¡œ ê¸°ë³¸ í”„ë¡ì‹œëŠ” ìì£¼ ì‚¬ìš©ë ì§€ëŠ” ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.

```java
public interface ProductSubject {

    void addProduct(Product product);

    Optional<Product> buyProduct(Long id);
}

public class ProductRealSubject implements ProductSubject {

    private final List<Product> products = new ArrayList<>();

    @Override
    public void addProduct(Product product) {
        this.products.add(product);
    }

    @Override
    public Optional<Product> buyProduct(Long id) {
        if (id == null) {
            return Optional.empty();
        }

        return this.products.stream()
                .filter(product -> product.isEqualsId(id))
                .findFirst();
    }
}

public class ProductProxy implements ProductSubject {

    private final ProductSubject subject;

    public ProductProxy(ProductSubject subject) {
        this.subject = subject;
    }

    @Override
    public void addProduct(Product product) {

        // ìœ„ì„
        this.subject.addProduct(product);
    }

    @Override
    public Optional<Product> buyProduct(Long id) {

        // ìœ„ì„
        return this.subject.buyProduct(id);
    }
}

public class Main {

    public static void main(String[] args) {
        Product productA = new Product(1L, "ì•„ì´í°", 1000000L);
        Product productB = new Product(2L, "ë§¥ë¶", 2000000L);

        ProductProxy proxy = new ProductProxy(new ProductRealSubject());

        proxy.addProduct(productA);
        proxy.addProduct(productB);

        Optional<Product> buyA = proxy.buyProduct(1L);
        System.out.println(buyA.isPresent());       // true

        Optional<Product> buyB = proxy.buyProduct(3L);
        System.out.println(buyB.isPresent());       // false
    }
}
```

<br>

### ê°€ìƒ í”„ë¡ì‹œ

- ê°€ìƒ í”„ë¡ì‹œëŠ” ì§€ì—° ì´ˆê¸°í™” ë°©ì‹ì„ ì§€ì›í•©ë‹ˆë‹¤.
- ì´ ë°©ì‹ì€ ì‹¤ì œ ê°ì²´ ìƒì„± ë¹„ìš©ì€ ë¹„ì‹¸ì§€ë§Œ ì‚¬ìš©ë˜ëŠ” ë¹ˆë„ê°€ ë‚®ì€ ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

```java
public interface ProductSubject {

    void addProduct(Product product);

    Optional<Product> buyProduct(Long id);
}

public class ProductRealSubject implements ProductSubject {

    private final List<Product> products = new ArrayList<>();

    @Override
    public void addProduct(Product product) {
        this.products.add(product);
    }

    @Override
    public Optional<Product> buyProduct(Long id) {
        if (id == null) {
            return Optional.empty();
        }

        return this.products.stream()
                .filter(product -> product.isEqualsId(id))
                .findFirst();
    }
}

public class ProductProxy implements ProductSubject {

    private ProductSubject subject;

    @Override
    public void addProduct(Product product) {

        // lazy
        if (this.subject == null) {
            this.subject = new ProductRealSubject();
        }

        // ìœ„ì„
        this.subject.addProduct(product);
    }

    @Override
    public Optional<Product> buyProduct(Long id) {

        // lazy
        if (this.subject == null) {
            this.subject = new ProductRealSubject();
        }

        // ìœ„ì„
        return this.subject.buyProduct(id);
    }
}

public class Main {

    public static void main(String[] args) {
        Product productA = new Product(1L, "ì•„ì´í°", 1000000L);
        Product productB = new Product(2L, "ë§¥ë¶", 2000000L);

        ProductProxy proxy = new ProductProxy();

        proxy.addProduct(productA);
        proxy.addProduct(productB);

        Optional<Product> buyA = proxy.buyProduct(1L);
        System.out.println(buyA.isPresent());       // true

        Optional<Product> buyB = proxy.buyProduct(3L);
        System.out.println(buyB.isPresent());       // false
    }
}
```

<br>

### ë¡œê¹… í”„ë¡ì‹œ

- ë¡œê¹… í”„ë¡ì‹œë„ ê¸°ë³¸í˜• í”„ë¡ì‹œì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤.

```java
public interface ProductSubject {

    void addProduct(Product product);

    Optional<Product> buyProduct(Long id);
}

public class ProductRealSubject implements ProductSubject {

    private final List<Product> products = new ArrayList<>();

    @Override
    public void addProduct(Product product) {
        this.products.add(product);
    }

    @Override
    public Optional<Product> buyProduct(Long id) {
        if (id == null) {
            return Optional.empty();
        }

        return this.products.stream()
                .filter(product -> product.isEqualsId(id))
                .findFirst();
    }
}

public class ProductProxy implements ProductSubject {

    private final ProductSubject subject;

    public ProductProxy(ProductSubject subject) {
        this.subject = subject;
    }

    @Override
    public void addProduct(Product product) {
        long startTime = System.currentTimeMillis();

        // ìœ„ì„
        this.subject.addProduct(product);

        long endTime = System.currentTimeMillis();

        System.out.println("completed time: " + (endTime - startTime));
    }

    @Override
    public Optional<Product> buyProduct(Long id) {
        long startTime = System.currentTimeMillis();

        // ìœ„ì„
        Optional<Product> result = this.subject.buyProduct(id);

        long endTime = System.currentTimeMillis();

        System.out.println("completed time: " + (endTime - startTime));

        return result;
    }
}

public class Main {

    public static void main(String[] args) {
        Product productA = new Product(1L, "ì•„ì´í°", 1000000L);
        Product productB = new Product(2L, "ë§¥ë¶", 2000000L);

        ProductProxy proxy = new ProductProxy(new ProductRealSubject());

        proxy.addProduct(productA);
        proxy.addProduct(productB);

        Optional<Product> buyA = proxy.buyProduct(1L);
        System.out.println(buyA.isPresent());       // true

        Optional<Product> buyB = proxy.buyProduct(3L);
        System.out.println(buyB.isPresent());       // false
    }
}
```

<br>

### ìºì‹± í”„ë¡ì‹œ

- ìºì‹± í”„ë¡ì‹œëŠ” ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ì¸ë°, ì´ëŠ” Redisë¥¼ ì‚¬ìš©í•˜ì—¬ ìºì‹±ì„ ì ìš©í•˜ëŠ”ê²ƒê³¼ ë¹„ìŠ·í•œ ì›ë¦¬ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-04-25 á„‹á…©á„’á…® 10 50 04](https://github.com/kdg0209/realizers/assets/80187200/3e505420-c6fe-4af2-8e8b-3226102456e1)

<br>

## ë°ì½”ë ˆì´í„° íŒ¨í„´

- ë°ì½”ë ˆì´í„° íŒ¨í„´ì€ ê°ì²´ë¥¼ ê²°í•©í•˜ì—¬ ê¸°ëŠ¥ì„ ë™ì ìœ¼ë¡œ í™•ì¥í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.
- ë°ì½”ë ˆì´í„° íŒ¨í„´ì—ì„œ ë°ì½”ë ˆì´í„° í´ë˜ìŠ¤ëŠ” ì›ë³¸ í´ë˜ìŠ¤ì™€ ê´€ë ¨ì´ ê¹Šì€ ê¸°ëŠ¥ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
- Javaì—ì„œ I/O ë¼ì´ë¸ŒëŸ¬ë¦¬(InputStream, OutputStream)ì€ ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

### ë°ì½”ë ˆì´í„° íŒ¨í„´ì„ ì ìš©í•˜ì§€ ì•Šì€ ìƒí™©

- ì•„ë˜ ì˜ˆì œ ì½”ë“œì—ì„œ ê¸°ë³¸ì ì¸ ì´ì€ ì¡°ì¤€, ê²¬ì°©, ì‚¬ê²©ì„ í•  ìˆ˜ ìˆì§€ë§Œ ìŠ¤ë‚˜ì´í¼ì˜ ê²½ìš° 4ë°°ìœ¨ì„ ì‚¬ìš©í•´ì„œ ì¡°ì¤€ì„ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë¼ì´í”Œ, ìœ íƒ„ë“±ê³¼ ê°™ì€ ë‹¤ë¥¸ ì´ë“¤ì´ í•„ìš”ë¡œí•˜ê²Œ ëœë‹¤ë©´ ìƒì†ì˜ ê²½ìš° ê¹Šì€ ìƒì† ê´€ê³„ë¡œ ì¸í•´ ê²°í•©ë„ê°€ ë†’ì•„ì§€ê²Œ ë©ë‹ˆë‹¤.

```java
public class Gun {

    public void aiming() {
        System.out.println("ì¡°ì¤€í•©ë‹ˆë‹¤.");
    }

    public void shoulder() {
        System.out.println("ê²¬ì°©í•©ë‹ˆë‹¤.");
    }

    public void shooting() {
        System.out.println("ì‚¬ê²©í•©ë‹ˆë‹¤.");
    }
}

public class Sniper extends Gun {

    @Override
    public void aiming() {
        System.out.println("4ë°°ìœ¨ë¡œ ì¡°ì¤€í•©ë‹ˆë‹¤.");
    }

    @Override
    public void shoulder() {
        super.shoulder();
    }

    @Override
    public void shooting() {
        super.shooting();
    }
}
```

<br>

### ğŸ§ ë°ì½”ë ˆì´í„° íŒ¨í„´ ì ìš©

- ë°ì½”ë ˆì´í„° íŒ¨í„´ì€ new ì¥ì‹ì(new ì›ë³¸()) í˜•ì‹ìœ¼ë¡œ ì¥ì‹ìë¥¼ ë‹¤ì–‘í•˜ê²Œ ê¾¸ë°€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì¥ì‹ì í´ë˜ìŠ¤ì˜ ì˜ëª»ëœ ìˆœì„œë¡œ ì¸í•´ ê°œë°œìê°€ ì˜ë„í•˜ì§€ ì•Šì€ëŒ€ë¡œ ë™ì‘ë  ìˆ˜ ìˆìœ¼ë‹ˆ ì¥ì‹ì ìˆœì„œì— ëŒ€í•´ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.

```java
public interface Gun {

    void aiming();

    void shoulder();

    void shooting();
}

// ê¸°ë³¸ ì´
public class BaseGun implements Gun {

    @Override
    public void aiming() {
        System.out.println("ì¡°ì¤€í•©ë‹ˆë‹¤.");
    }

    @Override
    public void shoulder() {
        System.out.println("ê²¬ì°©í•©ë‹ˆë‹¤.");
    }

    @Override
    public void shooting() {
        System.out.println("ì‚¬ê²©í•©ë‹ˆë‹¤.");
    }
}

// ì¥ì‹ì ì¶”ìƒ í´ë˜ìŠ¤
public class GrenadeLauncher extends GunDecorator {

    public GrenadeLauncher(Gun gun) {
        super(gun);
    }

    @Override
    public void shooting() {
        System.out.println("ìœ íƒ„ì„ ë°œì‚¬í•©ë‹ˆë‹¤.");
    }
}

public class Sniper extends GunDecorator  {

    public Sniper(Gun gun) {
        super(gun);
    }

    @Override
    public void aiming() {
        System.out.println("4ë°°ìœ¨ë¡œ ì¡°ì¤€í•©ë‹ˆë‹¤.");
    }
}

public class GrenadeLauncher extends GunDecorator {

    public GrenadeLauncher(Gun gun) {
        super(gun);
    }

    @Override
    public void shooting() {
        System.out.println("ìœ íƒ„ì„ ë°œì‚¬í•©ë‹ˆë‹¤.");
    }
}

public class AllInOneGun extends GunDecorator {

    public AllInOneGun(Gun gun) {
        super(gun);
    }
}

public class Main {

    public static void main(String[] args) {

        // ê¸°ë³¸ ì´
        Gun baseGun = new BaseGun();
        baseGun.shoulder();     // ê²¬ì°©í•©ë‹ˆë‹¤.
        baseGun.aiming();       // ì¡°ì¤€í•©ë‹ˆë‹¤.
        baseGun.shooting();     // ì‚¬ê²©í•©ë‹ˆë‹¤.

        // ì €ê²©ì´
        Gun sniper = new Sniper(new BaseGun());
        sniper.shoulder();      // ê²¬ì°©í•©ë‹ˆë‹¤.
        sniper.aiming();        // 4ë°°ìœ¨ë¡œ ì¡°ì¤€í•©ë‹ˆë‹¤.
        sniper.shooting();      // ì‚¬ê²©í•©ë‹ˆë‹¤.

        // ìœ íƒ„ë°œì‚¬ê¸°
        Gun grenadeLauncher = new GrenadeLauncher(new BaseGun());
        grenadeLauncher.shoulder(); // ê²¬ì°©í•©ë‹ˆë‹¤.
        grenadeLauncher.aiming();   // ì¡°ì¤€í•©ë‹ˆë‹¤.
        grenadeLauncher.shooting(); // ìœ íƒ„ì„ ë°œì‚¬í•©ë‹ˆë‹¤.

        // ì˜¬ì¸ì› ì´
        Gun allInOneGun = new AllInOneGun(new Sniper(new GrenadeLauncher(new BaseGun())));
        allInOneGun.shoulder(); // ê²¬ì°©í•©ë‹ˆë‹¤.
        allInOneGun.aiming();   // 4ë°°ìœ¨ë¡œ ì¡°ì¤€í•©ë‹ˆë‹¤.
        allInOneGun.shooting(); // ìœ íƒ„ì„ ë°œì‚¬í•©ë‹ˆë‹¤.
    }
}
```

<br>

## ì–´ëŒ‘í„° íŒ¨í„´









