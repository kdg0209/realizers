# ë°˜ë³µì íŒ¨í„´

- ë°˜ë³µì íŒ¨í„´ì€ ì»¤ì„œ íŒ¨í„´ì´ë¼ê³ ë„ í•©ë‹ˆë‹¤.
- ë°˜ë³µì íŒ¨í„´ì€ ì»¬ë ‰ì…˜ì„ ì •í•´ì§„ ìˆœì„œëŒ€ë¡œ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©ë˜ë©°, ì»¬ë ‰ì…˜ì´ë€ ë°°ì—´, ë§í¬ë“œ ë¦¬ìŠ¤íŠ¸, íŠ¸ë¦¬, ê·¸ë˜í”„, ì í”„ í…Œì´ë¸”ê³¼ ê°™ì´ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

### êµ¬ì¡°

<img width="1032" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-15 á„‹á…©á„’á…® 2 16 06" src="https://github.com/kdg0209/realizers/assets/80187200/7a276bb8-3850-4ded-8463-124d71105887">

<br>

### ë°˜ë³µì íŒ¨í„´ì„ ì ìš©í•˜ì§€ ì•Šì€ ì˜ˆì œ

- ì•„ë˜ì²˜ëŸ¼ ëŒ“ê¸€ì— ëŒ€í•œ ë‹¤ì–‘í•œ ì •ë ¬ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê²½ìš° ë°˜ë³µì íŒ¨í„´ì„ ì ìš©í•˜ì§€ ì•Šì€ ìƒí™©

```java
public class CommentCollection {

    private Comment[] comments;
    private int size;
    private int capacity;

    public CommentCollection() {
        this.size = 0;
        this.capacity = 4;
        this.comments = new Comment[this.capacity];
    }

    public void addComment(Comment comment) {
        this.comments[this.size] = comment;
        this.size++;
    }

    public void printBySort(Comparator<Comment> comparator) {
        Arrays.sort(this.comments, comparator);

        for (Comment comment : this.comments) {
            System.out.println(comment);
        }
    }
}

public class Comment implements Collection {

    private final String name;
    private final LocalDate createDate;

    public Comment(String name, LocalDate createDate) {
        this.name = name;
        this.createDate = createDate;
    }
}

public class Main {

    public static void main(String[] args) {

        CommentCollection collection = new CommentCollection();
        collection.addComment(new Comment("KDG", LocalDate.of(2024, 01, 10)));
        collection.addComment(new Comment("í™ê¸¸ë™", LocalDate.of(2024, 01, 03)));
        collection.addComment(new Comment("ì´ìˆœì‹ ", LocalDate.of(2024, 01, 02)));
        collection.addComment(new Comment("ê¹€ê¸¸ë™", LocalDate.of(2024, 01, 05)));

        // ì´ë¦„ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
        Comparator<Comment> comparatorA = (o1, o2) -> o1.getName().compareTo(o2.getName());
        collection.printBySort(comparatorA);
        // Comment{name='KDG', createDate=2024-01-10}
        // Comment{name='ê¹€ê¸¸ë™', createDate=2024-01-05}
        // Comment{name='ì´ìˆœì‹ ', createDate=2024-01-02}
        // Comment{name='í™ê¸¸ë™', createDate=2024-01-03}

        // ë“±ë¡ì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
        Comparator<Comment> comparatorB = (o1, o2) -> o1.getCreateDate().compareTo(o2.getCreateDate());
        collection.printBySort(comparatorB);
        // Comment{name='ì´ìˆœì‹ ', createDate=2024-01-02}
        // Comment{name='í™ê¸¸ë™', createDate=2024-01-03}
        // Comment{name='ê¹€ê¸¸ë™', createDate=2024-01-05}
        // Comment{name='KDG', createDate=2024-01-10}

    }
}
```

<br>

### ë°˜ë³µì íŒ¨í„´ì„ ì ìš©í•œ ì˜ˆì œ

- ë°˜ë³µì íŒ¨í„´ì„ í™œìš©í•˜ë©´ ë‹¤ì–‘í•˜ê²Œ ì»¬ë ‰ì…˜ì„ ìˆœíšŒí•´ì•¼í•˜ëŠ” ê²½ìš° ì–´ë–»ê²Œ ìˆœíšŒí• ê±´ì§€ì— ëŒ€í•œ êµ¬í˜„ì²´ë§Œ ì •ì˜ í›„ í•´ë‹¹ ê°ì²´ë¥¼ ì£¼ì…í•˜ë©´ ë˜ê³ , ì»¬ë ‰ì…˜ê³¼ ìˆœíšŒì— ëŒ€í•œ ë¡œì§ì´ ë¶„íˆë˜ì–´ ìˆì–´ í…ŒìŠ¤íŠ¸ê°€ ì‰½ìŠµë‹ˆë‹¤.

```java
public interface Iterator<E> {

    boolean hasNext();
    E next();
}

// ì´ë¦„ì„ ê¸°ì¤€ìœ¼ë¡œ ìˆœíšŒ
public class NameIterator implements Iterator<Comment> {

    private int cursor;
    private Comment[] comments;

    public NameIterator(Comment[] comments) {
        Arrays.sort(comments, (o1, o2) -> o1.getName().compareTo(o2.getName()));
        this.comments = comments;
        this.cursor = 0;
    }

    @Override
    public boolean hasNext() {
        return this.cursor != this.comments.length;
    }

    @Override
    public Comment next() {
        if (hasNext()) {
            Comment comment = this.comments[this.cursor];
            this.comments[this.cursor] = null; // help gc
            this.cursor++;

            return comment;
        }
        return null;
    }
}

// ë“±ë¡ì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ìˆœíšŒ
public class CreateDateIterator implements Iterator<Comment> {

    private int cursor;
    private Comment[] comments;

    public CreateDateIterator(Comment[] comments) {
        Arrays.sort(comments, (o1, o2) -> o1.getCreateDate().compareTo(o2.getCreateDate()));
        this.comments = comments;
        this.cursor = 0;
    }

    @Override
    public boolean hasNext() {
        return this.cursor != this.comments.length;
    }

    @Override
    public Comment next() {
        if (hasNext()) {
            Comment comment = this.comments[this.cursor];
            this.comments[this.cursor] = null; // help gc
            this.cursor++;

            return comment;
        }
        return null;
    }
}

public interface Collection<E> {

    Iterator<E> iterator(Iterator<E> iterator);
}

public class CommentCollection implements Collection<Comment> {

    private Comment[] comments;
    private int size;
    private int capacity;

    public CommentCollection() {
        this.size = 0;
        this.capacity = 4;
        this.comments = new Comment[this.capacity];
    }

    @Override
    public Iterator<Comment> iterator(Iterator<Comment> iterator) {
        return iterator;
    }

    public void addComment(Comment comment) {
        this.comments[this.size] = comment;
        this.size++;
    }

    public Comment[] snapShot() {
        return this.comments.clone();
    }
}

public class Comment {

    private final String name;
    private final LocalDate createDate;

    public Comment(String name, LocalDate createDate) {
        this.name = name;
        this.createDate = createDate;
    }

    // getter ë° toString ìƒëµ
}

public class Main {

    public static void main(String[] args) {

        CommentCollection collection = new CommentCollection();
        collection.addComment(new Comment("KDG", LocalDate.of(2024, 01, 10)));
        collection.addComment(new Comment("í™ê¸¸ë™", LocalDate.of(2024, 01, 03)));
        collection.addComment(new Comment("ì´ìˆœì‹ ", LocalDate.of(2024, 01, 02)));
        collection.addComment(new Comment("ê¹€ê¸¸ë™", LocalDate.of(2024, 01, 05)));

        Comment[] commentsA = collection.snapShot();
        Comment[] commentsB = collection.snapShot();

        // ì´ë¦„ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
        Iterator<Comment> iteratorA = collection.iterator(new NameIterator(commentsA));
        while (iteratorA.hasNext()) {
            System.out.println(iteratorA.next());
            // Comment{name='KDG', createDate=2024-01-10}
            // Comment{name='ê¹€ê¸¸ë™', createDate=2024-01-05}
            // Comment{name='ì´ìˆœì‹ ', createDate=2024-01-02}
            // Comment{name='í™ê¸¸ë™', createDate=2024-01-03}
        }

        // ë“±ë¡ì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
        Iterator<Comment> iteratorB = collection.iterator(new CreateDateIterator(commentsB));
        while (iteratorB.hasNext()) {
            System.out.println(iteratorB.next());
            // Comment{name='ì´ìˆœì‹ ', createDate=2024-01-02}
            // Comment{name='í™ê¸¸ë™', createDate=2024-01-03}
            // Comment{name='ê¹€ê¸¸ë™', createDate=2024-01-05}
            // Comment{name='KDG', createDate=2024-01-10}
        }
    }
}
```

<br>

#### ğŸ‘ ì¥ì 

- ì»¬ë ‰ì…˜ê³¼ ìˆœíšŒ ë¡œì§ì´ ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ì— ë”°ë¼ ë‚˜ëˆ ì ¸ ìˆìœ¼ë¯€ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì‰½ìŠµë‹ˆë‹¤.
- ë‹¤ì–‘í•œ iteratorê°€ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ì´ë¯€ë¡œ ì—¬ëŸ¬ ìˆœíšŒ ë¡œì§ì„ ì‰½ê²Œ ì˜ì¡´ì„± ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ğŸ¤” ë‹¨ì 

- ì»¬ë ‰ì…˜ì„ ìˆœíšŒí•˜ë©´ì„œ next() ë©”ì„œë“œë¥¼ í˜¸ì¶œí• í…ë° ì´ë•Œ ì»¬ë ‰ì…˜ì˜ ë°ì´í„°ê°€ ì¶”ê°€ ë° ì‚­ì œë˜ëŠ” ê²½ìš° ë°˜ë³µìì˜ ì»¤ì„œëŠ” ê°œë°œìê°€ ì˜ë„í•œëŒ€ë¡œ í˜ëŸ¬ê°€ì§€ ì•Šì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì°¾ê¸° ì–´ë ¤ìš´ ë²„ê·¸ë¥¼ ìœ ë°œì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - í•´ê²° ë°©ë²•
        - 1. ìˆœíšŒí•˜ëŠ” ë™ì•ˆ ìš”ì†Œì˜ ì¶”ê°€ì™€ ì‚­ì œë¥¼ ì•„ì˜ˆ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ë°©ë²•ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ë°©ë²•ì€ êµ¬í˜„ì´ ì–´ë µìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ìˆœíšŒì˜ ì‹œì‘ì€ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹œì ìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆì§€ë§Œ ìˆœíšŒì˜ ì¢…ë£ŒëŠ” ë°˜ë“œì‹œ ë°˜ë³µìê°€ ë§ˆì§€ë§‰ ìš”ì†Œê¹Œì§€ ë„ë‹¬í•œ ì‹œì ì´ ì•„ë‹Œ ì¤‘ê°„ì—ì„œë„ ë°˜ë³µì„ ë©ˆì¶œ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
          2. ìš”ì†Œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜, ì‚­ì œí•œ í›„ ìˆœíšŒì¤‘ì¸ ë°˜ë³µìì— ì˜¤ë¥˜ë¥¼ ë³´ê³ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ë°©ë²•ì€ Javaì—ì„œë„ ì‚¬ìš©ì„ í•˜ê³  ìˆê³  ArrayList í´ë˜ìŠ¤ì˜ checkForComodification() ë©”ì„œë“œë¥¼ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.
          3. ìŠ¤ëƒ…ìƒ·ì„ ë§Œë“¤ì–´ ì›ë³¸ ê°ì²´ì™€ ë™ì¼í•œ ê°ì²´ë¥¼ ìƒì„±í•œ í›„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë•Œ ì–•ì€ ë³µì‚¬ë¥¼ í•˜ë©´ ê°ì²´ ì°¸ì¡°ê°€ ê°™ìœ¼ë‹ˆ ê¹Šì€ ë³µì‚¬ë¥¼ í™œìš©í•´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë™ì¼í•œ ê°ì²´ê°€ ë³µì‚¬ë˜ë‹ˆ ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ë°œìƒí•©ë‹ˆë‹¤.






