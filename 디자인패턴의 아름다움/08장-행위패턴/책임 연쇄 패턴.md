# ì±…ì„ ì—°ì‡„ íŒ¨í„´

- ì±…ì„ ì—°ì‡„ íŒ¨í„´ì„ ì´í•´í•˜ê¸° ê°€ì¥ ì‰¬ìš´ ì˜ˆì œëŠ” ìŠ¤í”„ë§ì˜ ì‹œíë¦¬ë‹ˆ í•„í„° ì²´ì¸ì´ë¼ ìƒê°í•˜ëŠ”ë°, ê·¸ ì´ìœ ëŠ” ìš”ì²­ì˜ ë°œì‹ ê³¼ ìˆ˜ì‹ ì„ ë¶„ë¦¬í•˜ê³ , ë°œì‹ ëœ ìš”ì²­ì€ í•´ë‹¹ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ìˆ˜ì‹  ê°ì²´ë¥¼ ë§Œë‚ ë•Œê¹Œì§€ ì²´ì¸ì„ ë”°ë¼ ê³„ì† ì´ë™í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

### êµ¬ì¡°

<img width="1032" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-12 á„‹á…©á„’á…® 5 24 17" src="https://github.com/kdg0209/realizers/assets/80187200/dc217af2-1b2a-4fca-92f8-c14431b4d7d5">

<br>

### ì˜ˆì œ

- ì•„ë˜ ì˜ˆì œëŠ” ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë¬¸ìì—´ì—ì„œ ì•ë’¤ ê³µë°± ì œê±°ì™€ íƒœê·¸ ì œê±°, ìš•ì„¤ì„ ì œê±°í•˜ëŠ” ë¡œì§ì„ ì±…ì„ ì—°ì‡„ íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„í•œ ì½”ë“œì…ë‹ˆë‹¤.

```java
public abstract class BadWordFilter {

    protected BadWordFilter nextFilter = null;

    protected void setNextFilter(BadWordFilter nextFilter) {
        this.nextFilter = nextFilter;
    }

    protected abstract Request doFilter(Request request);
}

// ë¬¸ìì—´ ì•ë’¤ ê³µë°± ì œê±° í•„í„°
public class AFilter extends BadWordFilter {

    @Override
    protected Request doFilter(Request request) {
        String filteredContents = request.getContents().strip();
        return new Request(filteredContents);
    }
}

// ë¬¸ìì—´ ì¤‘ <p> íƒœê·¸ë¥¼ ì œê±°í•˜ëŠ” í•„í„°
public class BFilter extends BadWordFilter {

    @Override
    protected Request doFilter(Request request) {
        String filteredContents = request.getContents().replaceAll("<p>", "");
        return new Request(filteredContents);
    }
}

// ë¬¸ìì—´ ì¤‘ ìš•ì„¤ì„ '*' ë¬¸ìë¡œ ë³€í™˜í•˜ëŠ” í•„í„°
public class CFilter extends BadWordFilter {

    @Override
    protected Request doFilter(Request request) {
        String filteredContents = request.getContents().replaceAll("ìš•ì„¤", "*");
        return new Request(filteredContents);
    }
}

public class FilterChain {

    private final List<BadWordFilter> filters = new ArrayList<>();

    public void addSecurityHandler(BadWordFilter handler) {
        if (!this.filters.isEmpty()) {
            getLastFilter().setNextFilter(handler);
        }
        this.filters.add(handler);
    }

    public String handle(Request request) {
        Request next = request;
        BadWordFilter filter;
        Iterator<BadWordFilter> iterator = this.filters.iterator();

        while (iterator.hasNext()) {
            filter = iterator.next();
            next = filter.doFilter(next);
        }

        return next.getContents();
    }

    private BadWordFilter getLastFilter() {
        int last = this.filters.size() - 1;
        return this.filters.get(last);
    }
}

public class Request {

    private final String contents;

    public Request(String contents) {
        this.contents = contents;
    }

    public String getContents() {
        return contents;
    }
}

public class Main {

    public static void main(String[] args) {
        // 1. ì‚¬ìš©ìì˜ ìš”ì²­
        Request request = new Request(" ì˜¤ëŠ˜ì€ <p> ì›”ìš”ì¼ ê¸ˆìš”ì¼ì€ ì–¸ì œ ì˜¤ëƒ? ìš•ì„¤      ");

        // 2. í•„í„°ë¡œ ë¬¸ìì—´ í•„í„°ë§
        FilterChain filterChain = new FilterChain();
        filterChain.addSecurityHandler(new AFilter());
        filterChain.addSecurityHandler(new BFilter());
        filterChain.addSecurityHandler(new CFilter());

        // 3. í•„í„°ë§ëœ ë¬¸ìì—´ ë°˜í™˜
        String result = filterChain.handle(request);

        System.out.println("result : " + result); // ì˜¤ëŠ˜ì€  ì›”ìš”ì¼ ê¸ˆìš”ì¼ì€ ì–¸ì œ ì˜¤ëƒ? *
    }
}
```

<br>

#### ğŸ‘ ì¥ì 

- ë°œì‹ ìì™€ ìˆ˜ì‹ ìì˜ ì—­í• ê³¼ ì±…ì„ì„ ë‚˜ëˆ”ìœ¼ë¡œì¨ ê²°í•©ë„ë¥¼ ë‚®ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë‹¤ë¥¸ ì²´ì¸ì˜ ê´€ì„­ì—†ì´ ê°ê°ì˜ ì²´ì¸ì€ ìì‹ ì˜ ì—­í• ë§Œ ìˆ˜í–‰í•˜ê³  ë‹¨ì¼ ì±…ì„ì˜ ì›ì¹™ì„ ì¤€ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ğŸ¤” ë‹¨ì 

- ì²´ì¸ì´ ë§ì„ ê²½ìš° ë””ë²„ê¹…ì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì²´ì¸ì´ ë§ì„ ê²½ìš° ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

### ë‹¤ì–‘í•œ ì‚¬ìš© ì˜ˆì œ

#### ì±…ì„ ì—°ì‡„ íŒ¨í„´ ê¸°ë°˜ì˜ ì„œë¸”ë¦¿ í•„í„°

- Springìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•´ë´¤ë‹¤ë©´ í•œë²ˆì¯¤ ì„œë¸”ë¦¿ í•„í„°ë¥¼ ë“¤ì–´ë³¸ì ì´ ìˆì„ê²ƒì…ë‹ˆë‹¤. ì„œë¸”ë¦¿ í•„í„°ëŠ” ì‚¬ìš©ìì˜ ìš”ì²­ì— ëŒ€í•´ http ì¸ì¦, ë¡œê¹… ë“± ë‹¤ì–‘í•œ í•„í„°ë¥¼ í†µí•´ êµ¬í˜„ë˜ì–´ ìˆê³ , Spring Security ë˜í•œ ë§ˆì°¬ê°€ì§€ ì…ë‹ˆë‹¤.

















