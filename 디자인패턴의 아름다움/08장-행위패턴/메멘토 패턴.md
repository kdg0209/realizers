# ë©”ë©˜í†  íŒ¨í„´

- ë©”ë©˜í†  íŒ¨í„´ì€ ê°ì²´ì˜ ì„¸ë¶€ êµ¬í˜„ ì‚¬í•­ì„ ë…¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ì„œ í•´ë‹¹ ê°ì²´ì˜ ì´ì „ ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ë³µì›í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤. ìŠ¤ëƒ…ìƒ· íŒ¨í„´ì´ë¼ê³ ë„ ë¶ˆë¦½ë‹ˆë‹¤.

### êµ¬ì¡°

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-21 á„‹á…©á„’á…® 9 23 26](https://github.com/kdg0209/realizers/assets/80187200/7d12fe26-d9e3-418d-8076-530ee71112ef)

<br>

### ì˜ˆì‹œ

```java
// Originator
public class Text {

    private final StringBuilder sb = new StringBuilder();

    public void write(String text) {
        this.sb.append(text);
    }

    public String getText() {
        return this.sb.toString();
    }

    public TextSnapshot createTextSnapshot() {
        return new TextSnapshot(this.sb.toString());
    }

    public void restoreTextSnapshot(Optional<TextSnapshot> textSnapshot) {
        textSnapshot.ifPresent(it -> this.sb.replace(0, this.sb.length(), it.getText()));
    }
}

// Memento
public class TextSnapshot {

    private final String text;

    public TextSnapshot(String text) {
        this.text = text;
    }

    public String getText() {
        return this.text;
    }
}

// CareTaker
public class TextSnapshotHolder {

    private final Stack<TextSnapshot> snapshots = new Stack<>();

    public Optional<TextSnapshot> popTextSnapshot() {
        if (!this.snapshots.isEmpty()) {
            return Optional.of(this.snapshots.pop());
        }
        return Optional.empty();
    }

    public void pushTextSnapshot(TextSnapshot textSnapshot) {
        this.snapshots.push(textSnapshot);
    }
}

public class Main {

    public static void main(String[] args) {
        Text text = new Text();
        TextSnapshotHolder snapshotHolder = new TextSnapshotHolder();
        Scanner scanner = new Scanner(System.in);
        System.out.println("ë©”ëª¨ì¥ ì—´ê¸°");

        while (scanner.hasNext()) {
            String input = scanner.nextLine();

            if (input.equals(":list")) {
                System.out.println(text.getText());
            } else if (input.equals(":undo")) {
                Optional<TextSnapshot> textSnapshot = snapshotHolder.popTextSnapshot();
                text.restoreTextSnapshot(textSnapshot);
            } else {
                TextSnapshot textSnapshot = text.createTextSnapshot();
                snapshotHolder.pushTextSnapshot(textSnapshot);
                text.write(input);
            }
        }
    }
}

// hello ì…ë ¥
// world ì…ë ¥
// :list ì…ë ¥í•˜ë©´ helloworld ì¶œë ¥
// :undo ì…ë ¥í•˜ë©´ world ì‚­ì œë¨
// :undo ì…ë ¥í•˜ë©´ hello ì‚­ì œë¨
// :list ì…ë ¥í•˜ë©´ ë¹ˆ ë¬¸ìì—´ ì¶œë ¥
```

<br>

#### ğŸ‘ ì¥ì 

- ìº¡ìŠí™”ë¥¼ ì§€í‚¤ë©´ì„œ ê°ì²´ì˜ ìŠ¤ëƒ…ìƒ·ì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ğŸ¤” ë‹¨ì 

- mementoê°€ ì €ì¥í•  ë°ì´í„°ê°€ ë§ì€ ê²½ìš° ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì¦ê°€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.















