# 다각화하기

<br>

## 1. 단기 기억과 장기 기억

- 사람의 뇌에는 단기 기억을 저장할 수 있는 공간과 장기 기억을 저장할 수 있는 공간이 있는데, 이를 코드를 작성하거나 수정할 때 적용할 수 있습니다.

### 레거시 코드와 메모리

- 레거시 코드로 작업을 할 때 코드베이스를 천천히 이해하고, 뇌속에 저장하는 과정을 거치게 됩니다. 하지만 레거시 코드를 만질 때 아래와 같은 문제점이 있다는 것을 항상 기억해야 합니다.
  - 코드베이스를 이해하고 익히는데 시간이 다소 오래 걸립니다.
  - 변경하기 어렵습니다.

#### 🧐 레거시 코드를 어떻게 변경해나가야할까?

- 레거시 코드는 어딜가나 마주하게 되어있고, 언젠간 수정을 해야할 일이 발생합니다. 그때 우리는 어떻게 안전하게 변경을 할 수 있을까요? 저는 우선 기존 코드에 최대한 테스트 코드를 작성하고 리팩토링을 하면서 작업을 수행해야하지 않을까? 생각을 하곤합니다.
다만 이러한 방식이 이상적이고, 실제 마주한 레거시 코드는 외부 모듈에 의존하고 있는 상황도 있을테고, 더 복작한 비지니스 로직을 가진 상황일 수도 있을거 같은데 그럼에도 우선 가능한 최대한 테스트 코드를 작성하고 천천히 변경을 가해야한다고 생각합니다.

<br>

## 2. 용량

- 켄트 벡은 아래와 같은 말을 했다고 합니다. 아래 글을 읽고 개인적인 생각은 OOP를 최대한 준수하려고 노력해야하며, 클래스에 어느정도의 책임과 역할을 부여해야하는지 고민이 필요하며 이것 또한 휴리스틱 방식이기 때문에 많은 것을 만들어보고, 눈으로 보는 경험을 최대한 많이 해야할 거 같다.
그리고 자신의 주관이 생기면 적용하려고 노력해야할 거 같습니다. 참고로 스프링 소스를 가끔 보다보면 많은 생각이 들어갔구나 느껴질 때가 있습니다.

```text
- 켄트 벡 -
소프트웨어 설계의 목표는 인간의 머리에 잘 들어오는 덩어리 혹은 조각을 만드는 것입니다. 소프트웨어는 계속 커지지만, 인간의 정신은 한계가 있기 때문에 계속 변화를 주려면 다른 방식으로 쪼개고 분리해야 합니다.
```

<br>

### 악마의 변호인

- 악마의 변호인이란 하드코딩된 데이터를 데이터베이스에 저장을 하던가 외부 모듈로 전송하는 방식을 말합니다. 즉 실제 사용자의 요청값에 따라 비지니스 로직을 처리하는게 아니라, 개발자가 생각한 임의의 값을 사용하여 우선적으로 비지니스 로직을 구성하는 것이라고 생각해주시면 될 거 같습니다.
- 이 기법이 항상 필요한 것은 아니지만 때로는 쓸모가 있다고 합니다.
- 악마의 변호인 방식을 사용해서 테스트를 작성하고 테스트가 정상적으로 통과된다면 실제로 더 많은 테스트 케이스가 필요하다는 뜻이라고 합니다. 이 과정을 일종의 다각화라고 합니다.(와닿지 않습니다...)

<br>

### 테스트는 언제 충분하다고 할 수 있을까?

- 정답은 없지만 테스트 코드를 작성함으로써 안좋은 결과가 나올 확률을 최대한 줄이는 것을 목표로 잡아야할 거 같습니다.

```text
코드가 더 나빠지는 퇴행이 일어날 가능성은 얼마나 될까?
```

<br>

#### 개인적인 생각

- 레거시 코드를 만난다면 어떻게 대처할 것인가 다시한번 생각해 볼 시간을 가질 수 있었습니다.
- 용량이라는 파트에서 하나의 클래스 혹은 메서드가 어느정도로 구성이 되어야할까? 메서드라면 5줄 이상이 넘지 않아야할까? 오히려 메서드를 잘게 나눠서 인지부조화가 발생할 수 있지 않을까? 여러가지 고민점을 남기는것 같습니다.


